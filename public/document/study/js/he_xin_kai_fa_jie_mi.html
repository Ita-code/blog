<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>核心开发解密 | 壹樂&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/hero_write.png">
    <link rel="mask-icon" href="/blog/hero_write.svg" color="#42b983">
    <script language="javascript" type="text/javascript" src="/blog/js/MouseClickEffect.js"></script>
    <meta name="description" content="任何值得去的地方都没有捷径。">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="theme-color" content="#42b983">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/hero_write.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b2cf1e25.css" as="style"><link rel="preload" href="/blog/assets/js/app.7577deed.js" as="script"><link rel="preload" href="/blog/assets/js/4.7e4bef46.js" as="script"><link rel="preload" href="/blog/assets/js/1.0a267af7.js" as="script"><link rel="preload" href="/blog/assets/js/25.bb21919b.js" as="script"><link rel="preload" href="/blog/assets/js/13.2e75bce1.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.cb210533.js"><link rel="prefetch" href="/blog/assets/js/11.eee94399.js"><link rel="prefetch" href="/blog/assets/js/12.85fb76fb.js"><link rel="prefetch" href="/blog/assets/js/14.f31f809d.js"><link rel="prefetch" href="/blog/assets/js/15.e6b24549.js"><link rel="prefetch" href="/blog/assets/js/16.516eef3f.js"><link rel="prefetch" href="/blog/assets/js/17.88af53c3.js"><link rel="prefetch" href="/blog/assets/js/18.eb8c815b.js"><link rel="prefetch" href="/blog/assets/js/19.22139b02.js"><link rel="prefetch" href="/blog/assets/js/2.6025a26d.js"><link rel="prefetch" href="/blog/assets/js/20.5e4fe459.js"><link rel="prefetch" href="/blog/assets/js/21.a7f47cc8.js"><link rel="prefetch" href="/blog/assets/js/22.c3f30840.js"><link rel="prefetch" href="/blog/assets/js/23.50357cd2.js"><link rel="prefetch" href="/blog/assets/js/24.4243a7f1.js"><link rel="prefetch" href="/blog/assets/js/26.bcd691ee.js"><link rel="prefetch" href="/blog/assets/js/27.946345b7.js"><link rel="prefetch" href="/blog/assets/js/28.889b552b.js"><link rel="prefetch" href="/blog/assets/js/29.25d3c6ef.js"><link rel="prefetch" href="/blog/assets/js/30.1d2c45b0.js"><link rel="prefetch" href="/blog/assets/js/31.4db51656.js"><link rel="prefetch" href="/blog/assets/js/32.a9f3bcff.js"><link rel="prefetch" href="/blog/assets/js/33.81713ec6.js"><link rel="prefetch" href="/blog/assets/js/34.5000b0e1.js"><link rel="prefetch" href="/blog/assets/js/5.9ca766bd.js"><link rel="prefetch" href="/blog/assets/js/6.e0e9feff.js"><link rel="prefetch" href="/blog/assets/js/7.7a865ce6.js"><link rel="prefetch" href="/blog/assets/js/8.75dcbd09.js"><link rel="prefetch" href="/blog/assets/js/9.568cc2ca.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b2cf1e25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-035b7fbd><div data-v-035b7fbd><div id="loader-wrapper" class="loading-wrapper" data-v-2c578df8 data-v-035b7fbd data-v-035b7fbd><div class="loader-main" data-v-2c578df8><div data-v-2c578df8></div><div data-v-2c578df8></div><div data-v-2c578df8></div><div data-v-2c578df8></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-464cc40f data-v-035b7fbd data-v-035b7fbd><h3 class="title" data-v-464cc40f data-v-464cc40f>壹樂's blog</h3> <p class="description" data-v-464cc40f data-v-464cc40f>任何值得去的地方都没有捷径。</p> <label id="box" class="inputBox" data-v-464cc40f data-v-464cc40f><input type="password" value="" data-v-464cc40f> <span data-v-464cc40f>Konck! Knock!</span> <button data-v-464cc40f>OK</button></label> <div class="footer" data-v-464cc40f data-v-464cc40f><span data-v-464cc40f><i class="iconfont reco-theme" data-v-464cc40f></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-464cc40f>vuePress-theme-reco</a></span> <span data-v-464cc40f><i class="iconfont reco-copyright" data-v-464cc40f></i> <a data-v-464cc40f><span data-v-464cc40f>壹樂</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-035b7fbd><header class="navbar" data-v-035b7fbd><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/log1.jpg" alt="壹樂's blog" class="logo"> <span class="site-name">壹樂's blog</span></a> <div class="links"><div id="dayNightSwitch" class="generalWrapper" data-v-780eb6a6><a class="click" data-v-780eb6a6><div class="onOff daySwitch" data-v-780eb6a6><div class="star star1" data-v-780eb6a6></div> <div class="star star2" data-v-780eb6a6></div> <div class="star star3" data-v-780eb6a6></div> <div class="star star4" data-v-780eb6a6></div> <div class="star star5" data-v-780eb6a6></div> <div class="star sky" data-v-780eb6a6></div> <div class="sunMoon" data-v-780eb6a6><div class="crater crater1" data-v-780eb6a6></div> <div class="crater crater2" data-v-780eb6a6></div> <div class="crater crater3" data-v-780eb6a6></div> <div class="cloud part1" data-v-780eb6a6></div> <div class="cloud part2" data-v-780eb6a6></div></div></div></a></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/Javascript/" class="nav-link"><i class="undefined"></i>
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Css/" class="nav-link"><i class="undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Vue.js/" class="nav-link"><i class="undefined"></i>
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/blog/messageBoard/" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      实用
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  iconfont
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.lodashjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  lodash
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link"><i class="iconfont reco-mail"></i>
  联系我
</a></li><li class="dropdown-item"><!----> <a href="/blog/resume/" class="nav-link"><i class="iconfont reco-blog"></i>
  关于我
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-035b7fbd></div> <aside class="sidebar" data-v-035b7fbd><div class="personal-info-wrapper" data-v-0490442a data-v-035b7fbd><img src="/blog/img/log1.jpg" alt="author-avatar" class="personal-img" data-v-0490442a> <h3 class="name" data-v-0490442a>
    壹樂
  </h3> <div class="num" data-v-0490442a><div data-v-0490442a><h3 data-v-0490442a>16</h3> <h6 data-v-0490442a>文章</h6></div> <div data-v-0490442a><h3 data-v-0490442a>9</h3> <h6 data-v-0490442a>标签</h6></div></div> <ul class="social-links" data-v-0490442a></ul> <hr data-v-0490442a></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/Javascript/" class="nav-link"><i class="undefined"></i>
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Css/" class="nav-link"><i class="undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Vue.js/" class="nav-link"><i class="undefined"></i>
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/blog/messageBoard/" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      实用
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  iconfont
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.lodashjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  lodash
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link"><i class="iconfont reco-mail"></i>
  联系我
</a></li><li class="dropdown-item"><!----> <a href="/blog/resume/" class="nav-link"><i class="iconfont reco-blog"></i>
  关于我
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/document/study/js/jsshi_jian_wei_tuo.html" class="sidebar-link">事件委托</a></li><li><a href="/blog/document/study/js/jszuo_yong_yu.html" class="sidebar-link">作用域</a></li><li><a href="/blog/document/study/js/jsshu_zu.html" class="sidebar-link">最全的数组方法以及实例</a></li><li><a href="/blog/document/study/js/shi_yong_gong_ju_han_shu.html" class="sidebar-link">实用工具函数</a></li><li><a href="/blog/document/study/js/shu_ju_jie_gou_yu_suan_fa.html" class="sidebar-link">数据结构与算法</a></li><li><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html" aria-current="page" class="active sidebar-link">核心开发解密</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-464cc40f data-v-035b7fbd><h3 class="title" data-v-464cc40f data-v-464cc40f>核心开发解密</h3> <!----> <label id="box" class="inputBox" data-v-464cc40f data-v-464cc40f><input type="password" value="" data-v-464cc40f> <span data-v-464cc40f>Konck! Knock!</span> <button data-v-464cc40f>OK</button></label> <div class="footer" data-v-464cc40f data-v-464cc40f><span data-v-464cc40f><i class="iconfont reco-theme" data-v-464cc40f></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-464cc40f>vuePress-theme-reco</a></span> <span data-v-464cc40f><i class="iconfont reco-copyright" data-v-464cc40f></i> <a data-v-464cc40f><span data-v-464cc40f>壹樂</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-035b7fbd><main class="page"><section><div class="page-image"><img src="https://zihonghuang.gitee.io/image/bg2.jpg" alt=""> <div class="page-title"><h1 class="title">核心开发解密</h1> <div class="page-info" data-v-4601a928><i class="iconfont reco-account" data-v-4601a928><span data-v-4601a928>壹樂</span></i> <i class="iconfont reco-date" data-v-4601a928><span data-v-4601a928>2020-11-05</span></i> <!----> <i class="tags iconfont reco-tag" data-v-4601a928><span class="tag-item" data-v-4601a928>读后笔记</span><span class="tag-item" data-v-4601a928>笔记</span></i></div></div></div> <div class="theme-reco-content content__default"><div class="custom-block tip"><p class="title"></p><p>此篇文章是我在看《JavaScript核心开发解密》中，总结的一些笔记，希望大家能给出一些意见。</p></div> <h2 id="三种基础数据结构"><a href="#三种基础数据结构" class="header-anchor">#</a> 三种基础数据结构</h2> <h3 id="栈"><a href="#栈" class="header-anchor">#</a> 栈</h3> <p>栈是一种数据结构，它是表达数据的一种存取方式。</p> <p>栈可以用来规定代码的执行顺序，在JavaScript中叫作函数调用栈（call stack），它是根据栈数据结构理论而实现的一种实践。</p> <p>存取的方式特点：先进后出，后进先出（LIFO，Last In，First Out）。</p> <p>push:向数组末尾添加元素（进栈方法）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a:[1]</span>
        a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token comment">//a:[1,2,4,6]</span>
        <span class="token keyword">var</span> l<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment">//a:[1,2,4,6,5]</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>pop：弹出数据最末尾的一个元素（出栈方法）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a:[2,4,6,7,8]</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><h3 id="堆"><a href="#堆" class="header-anchor">#</a> 堆</h3> <p>堆数据结构通常是一种数状态结构。</p> <p>可以用用对象字面量对象的形式体现出来</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token punctuation">{</span>
            a<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
            b<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
            c<span class="token operator">:</span> <span class="token punctuation">{</span>
                m<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                n<span class="token operator">:</span> <span class="token number">110</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>示意图的理解方式</p> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ctcvcict-1604546278779)(C:\Users\19752\AppData\Roaming\Typora\typora-user-images\image-20201102203626430.png)]</p></li> <li><h3 id="队列"><a href="#队列" class="header-anchor">#</a> 队列</h3> <p>队列（queue）是一种先进先出（FIFO)的数据结构。正如排队过安检一样，排在队伍前面的人一定是最先过安检的人。原理图如下[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-VJJYN4MD-1604546278781)(C:\Users\19752\Desktop\u=4007848708,1685442224&amp;fm=15&amp;gp=0.png)]</p></li></ul> <h2 id="内存空间"><a href="#内存空间" class="header-anchor">#</a> 内存空间</h2> <ul><li><h3 id="基本数据类型与变量对象"><a href="#基本数据类型与变量对象" class="header-anchor">#</a> 基本数据类型与变量对象</h3> <table><thead><tr><th>类型</th> <th>值</th></tr></thead> <tbody><tr><td>Boolean</td> <td>只有两个值：true与false</td></tr> <tr><td>Null</td> <td>只有一个值：null</td></tr> <tr><td>Undefined</td> <td>只有一个值：undefined</td></tr> <tr><td>Number</td> <td>所有的数字</td></tr> <tr><td>String</td> <td>所有的字符串</td></tr> <tr><td>Symbol</td> <td>符号类型var sym=Symbol('testsymbol')</td></tr></tbody></table> <p>注意：目前很多浏览器还不支持Symbol，因此不建议在实践中使用。</p></li> <li><h3 id="引用数据类型与堆内存空间"><a href="#引用数据类型与堆内存空间" class="header-anchor">#</a> 引用数据类型与堆内存空间</h3> <p>引用数据类型（Object）的值是保存在堆内存空间中的对象。在JavaScript中，不允许直接访问堆内存空间中的数据，因此不能直接操作对象的堆内存空间。在操作对象时，实际上是在操作对象的引用而不是实际对象。因此，引用数据类型都是按引用访问的。这里的引用，可以理解为保存在变量对象中的一个地址，该地址与堆内存中的对象相关联。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> a2 <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> a3 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> m<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-I9DRcedX-1604546278782)(C:\Users\19752\AppData\Roaming\Typora\typora-user-images\image-20201104000222968.png)]</p> <p>两个内存面试题</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> b<span class="token operator">=</span>a<span class="token punctuation">;</span>
        b<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
      <span class="token comment">//这时候a的值是多少  </span>
</code></pre></div><p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-OWyuNjue-1604546278784)(C:\Users\19752\AppData\Roaming\Typora\typora-user-images\image-20201104001504053.png)]</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> m<span class="token operator">=</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> n<span class="token operator">=</span>m<span class="token punctuation">;</span>
        n<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span>
</code></pre></div><p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-kANNsRPW-1604546278787)(C:\Users\19752\AppData\Roaming\Typora\typora-user-images\image-20201104002312011.png)]</p></li> <li><h3 id="内存空间管理"><a href="#内存空间管理" class="header-anchor">#</a> 内存空间管理</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> num<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
	<span class="token function">alter</span><span class="token punctuation">(</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        num<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><ol><li>分配内存</li> <li>使用分配到的内存</li> <li>不需要时释放内存</li> <li>Javascript的垃圾回收实现主要依靠“引用”的概念，当一块内存空间中的数据能够被访问时，垃圾回收器就认为“该数据能够被获得”。不能够获得的数据，就会被打上标记，并回收内存空间。这种方式叫做 <strong>标记-清除算法</strong></li></ol></li></ul> <h2 id="执行上下文"><a href="#执行上下文" class="header-anchor">#</a> 执行上下文</h2> <ul><li><h3 id="javascript运行环境"><a href="#javascript运行环境" class="header-anchor">#</a> JavaScript运行环境</h3> <ol><li>全局环境：代码运行起来首先会进入全局环境。</li> <li>函数环境：当前函数被调用执行时，会进入当前函数中执行代码。</li> <li>eval环境：不建议使用。</li></ol></li></ul> <h2 id="变量对象"><a href="#变量对象" class="header-anchor">#</a> 变量对象</h2> <p>变量对象的创建过程</p> <ol><li>在chrome浏览中，变量对象会首先获得函数的参数变量及其值；在firefox浏览器中，是直接将参数对象arguments保存在变量对象中。</li> <li>依次获取当前上下文中所有的函数声明，也是使用function关键字声明的函数。在变量对象中会以函数名建立一个属性，属性值为指向该函数所在的内存地址引用。如果函数名的属性已存在，那么该的属性值会被新的引用覆盖。</li> <li>依次获取当前上下文中的变量声明，也就是使用var关键字声明的变量，每找到一个变量声明，就在变量对象中就以变量名建立一个属性，属性值为undefined。如果该变量名的属性已存在，为了防止同名的函数被修改为undefined，则会直接跳过，原属性值不会被修改。</li></ol> <p>执行过程</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
		<span class="token comment">//创建阶段</span>
        <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token keyword">undefined</span><span class="token punctuation">;</span>
        a<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <h3 id="闭包的概念"><a href="#闭包的概念" class="header-anchor">#</a> 闭包的概念</h3> <ol><li><p>闭包是一种特殊的对象。</p></li> <li><p>它由两部分组成-执行上下文（代号A）,以及在该执行上下文中创建的函数（代号B）。当B执行时,如果访问了A中的变量对象中的值, 那么闭包就产生了</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 这就是一个简单的闭包</span>
		<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> b<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
            <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> bar<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>闭包的作用</p> <ol><li>闭包就是将某个功能集合通过函数的封装成一个模块,对外暴露一个借口,只能通过此接口去访问,闭包中的其他成员对于其他模块是隐藏的</li> <li>限制了作用域,减少命名冲突</li> <li>封装一个通用的功能供多模块使用,不用担心各个模块内出现命名冲突</li> <li>由于变量常驻内存，增大内存使用量</li> <li>就我个人使用过程中的理解,闭包就是将某个功能集合通过函数封装成一个模块,对外暴露一个接口,只可以通过此接口去访问,闭包中的其他成员对于其他的模块是隐藏的,限制了作用域,减少了名称冲突的发生.</li></ol> <p>判断闭包的标准</p> <ol><li>必须有外部的封闭函数，该函数至少被调用一次</li> <li>封闭的函数至少返回一个内部函数（对象字面量，{key:value...} ）</li> <li>闭包一定具有嵌套函数</li> <li>内层函数一定操作了外层函数的局部变量</li> <li>外层函数将内层函数返回外部，需要一个变量接住（全局变量）</li></ol></li></ol> <h3 id="闭包与垃圾回收机制"><a href="#闭包与垃圾回收机制" class="header-anchor">#</a> 闭包与垃圾回收机制</h3> <p>​	当一个函数的执行上下文完毕之后，内部的所有内容都会失去引用而被垃圾回收机制回收。</p> <p>​	闭包的本质就是在函数外部保持了内部变量的引用，因此闭包会阻止垃圾回收机制进行回收。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">999</span><span class="token punctuation">;</span>
            <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                n <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="闭包与作用域链"><a href="#闭包与作用域链" class="header-anchor">#</a> 闭包与作用域链</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> fn<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">function</span> <span class="token function">innerFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            fn<span class="token operator">=</span>innerFoo<span class="token punctuation">;</span><span class="token comment">//将innerFoo的引用赋值给全局变量中fn</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此处保留了innerFoo得引用</span>
        <span class="token punctuation">}</span>
        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
</code></pre></div><h3 id="应用闭包"><a href="#应用闭包" class="header-anchor">#</a> 应用闭包</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">//题目</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
		
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre></div><h3 id="单例模式与闭包"><a href="#单例模式与闭包" class="header-anchor">#</a> 单例模式与闭包</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> per <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">&quot;iskr&quot;</span><span class="token punctuation">,</span>
            age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getAge</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        per<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;敖&quot;</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//敖</span>
</code></pre></div><p>有私有方法属性的单例模式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//有私有方法、私有属性的单例**别人可以取可以修改，但是权限由我们决定的</span>
<span class="token keyword">var</span> per <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function-variable function">getAge</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> age<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// per.getName = &quot;13&quot;; //报错</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//访问私有的变量</span>
</code></pre></div><h3 id="闭包与模块化"><a href="#闭包与模块化" class="header-anchor">#</a> 闭包与模块化</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> module_status <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token punctuation">{</span>
                number<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                color<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">var</span> <span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> status<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">var</span> <span class="token function-variable function">set</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                status<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                get<span class="token operator">:</span> get<span class="token punctuation">,</span>
                set<span class="token operator">:</span> set
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> module_color <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// 想当于 import status from 'module_status';</span>
            <span class="token keyword">var</span> state <span class="token operator">=</span> module_status<span class="token punctuation">;</span>

            <span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'pink'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> color <span class="token operator">=</span> colors<span class="token punctuation">[</span>state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> color<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                render<span class="token operator">:</span> render
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> module_conext <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> state <span class="token operator">=</span> module_status<span class="token punctuation">;</span>

            <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;this Number is&quot;</span> <span class="token operator">+</span> state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                render<span class="token operator">:</span> render
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> module_main <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> state <span class="token operator">=</span> module_status<span class="token punctuation">;</span>
            <span class="token keyword">var</span> color <span class="token operator">=</span> module_color<span class="token punctuation">;</span>
            <span class="token keyword">var</span> conext <span class="token operator">=</span> module_conext<span class="token punctuation">;</span>

            <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> newNumber <span class="token operator">=</span> state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> newNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
                color<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                conext<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="this"><a href="#this" class="header-anchor">#</a> this</h2> <p>当前函数的this是在函数被调用执行的时候才能确认的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
            a1<span class="token operator">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  window</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//改变指向并执行20   改变了this指向，obj</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//改变执行并未执行</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//改变指向并执行20</span>
        <span class="token comment">//bind：语法和call一模一样，区别在于立即执行还是等待执行，bind不兼容IE6~8</span>
        <span class="token comment">//apply：和call基本上一致，唯一区别在于传参方式</span>
        <span class="token comment">//call(this,Number,Number)</span>
        <span class="token comment">//apply(this,[Number,Number])第二个参数以数组的形式传参</span>
        <span class="token comment">//bind方法 函数不会立即执行,而是返回一个新的函数,这个新的函数与原函数有共同的函数体</span>
        <span class="token comment">//但它并非原函数,并且新的函数的参数与this指向都已经被绑定</span>
</code></pre></div><p>注意的地方</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 'use strict'</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在严格模式下输出undefined,非严格模式下this指向undefinde时它会自动指向全局对象</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用者为fn  *独立调用*  this为undefined</span>
        window<span class="token punctuation">.</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//fn是调用者,被window所拥有,this为window对象</span>
</code></pre></div><p>独立调用时</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">//demo2</span>
        <span class="token keyword">var</span> a2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
            a<span class="token operator">:</span> <span class="token number">40</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fn2 this:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//独立调用</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//改变指向obj2</span>
        <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//独立调用 所以其值就会是全局作用域下的a2</span>
</code></pre></div><p>对象字面量不会产生自己的作用域</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//demo3</span>
        <span class="token keyword">var</span> a3 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// &quot;use strict&quot;; //严格模式必须放在头上最最最最上面</span>
            <span class="token keyword">var</span> a3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> obj3 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">//对象字面量的写法不会产生自己的作用域</span>
                a3<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//所以下面的a3就不会指向a3=10,this跟foo函数内部的this一样</span>
                c3<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a3 <span class="token operator">+</span> a3
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> obj3<span class="token punctuation">.</span>c3<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//指向全局</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//独立调用在严格模式下报错this指向undefind</span>
</code></pre></div><p>这里将函数引用的地址赋值给test4，然后独立调用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//demo4</span>
        <span class="token keyword">var</span> a4 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> fn4 <span class="token operator">=</span> <span class="token punctuation">{</span>
            a4<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getA</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a4<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn4<span class="token punctuation">.</span><span class="token function">getA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//10</span>
        <span class="token keyword">var</span> test4 <span class="token operator">=</span> fn4<span class="token punctuation">.</span>getA<span class="token punctuation">;</span> <span class="token comment">//因为test4的指向为undefined非严格模式下指向window</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//则输出20</span>
</code></pre></div><p>对象调用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//demo5</span>
        <span class="token keyword">function</span> <span class="token function">fn5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">active</span><span class="token punctuation">(</span><span class="token parameter">fn5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> a5 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> obj5 <span class="token operator">=</span> <span class="token punctuation">{</span>
            a5<span class="token operator">:</span> <span class="token number">55</span><span class="token punctuation">,</span>
            getA1<span class="token operator">:</span> fn5<span class="token punctuation">,</span>
            active<span class="token operator">:</span> active
        <span class="token punctuation">}</span>
        <span class="token function">active</span><span class="token punctuation">(</span>obj5<span class="token punctuation">.</span>getA1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//独立调用this为undefined  执行结果为5</span>
        obj5<span class="token punctuation">.</span><span class="token function">active</span><span class="token punctuation">(</span>obj5<span class="token punctuation">.</span>getA1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//5</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">//demo6</span>
        <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token string">'window'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> obj6 <span class="token operator">=</span> <span class="token punctuation">{</span>
            n<span class="token operator">:</span> <span class="token string">'obj6'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getN</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>n<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj6<span class="token punctuation">.</span><span class="token function">getN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//window</span>
</code></pre></div><h2 id="函数与函数式编程"><a href="#函数与函数式编程" class="header-anchor">#</a> 函数与函数式编程</h2> <h3 id="函数声明"><a href="#函数声明" class="header-anchor">#</a> 函数声明</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.函数声明</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fn函数声明&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//在变量对象的创建过程中,function声明的函数比var声明的变量有更加优先的执行顺序,即我们常常提到的函数声明提前,</span>
        <span class="token comment">//因此在同一执行上下文中,无论在什么地方声明了函数,都可以直接使用。</span>
        <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

            <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//30</span>
</code></pre></div><h3 id="函数表达式"><a href="#函数表达式" class="header-anchor">#</a> 函数表达式</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//2.函数表达式</span>
        <span class="token comment">//函数表达式其实就是将一个函数体赋值给一个变量的过程</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//因此,我们理解函数表达式时,可以与变量共同理解。上面代码的执行过程</span>
        <span class="token comment">// var fn2=undefined;</span>
        <span class="token comment">// fn2=function(){}</span>
        <span class="token comment">// 其中,var fn2=undefined会因为变量对象的原因而提前执行,这就是常常被提到的变量提升。</span>
        <span class="token comment">//因此当我们使用函数表达式时,必须要考虑代码执行的先后顺序的关系,这是与函数声明不同的地方</span>
        <span class="token comment">//例</span>
        <span class="token comment">// fn3();//fn3 is not function</span>
        <span class="token comment">// var fn3 = function() {</span>
        <span class="token comment">//     console.log(&quot;fn3&quot;)</span>
        <span class="token comment">// }</span>
        <span class="token comment">//如果喜欢使用函数表达式,那一定要有一个良好的编码习惯,以规避变量提升带来的负面影响。</span>
        <span class="token comment">//更多的函数体赋值  场景</span>
        <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">naem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
            <span class="token comment">// 在构造函数内部添加方法</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 给原型上添加方法</span>
        <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 在对象中添加方法</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
            m<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getM</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>m<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getThis</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this指向调用者</span>
</code></pre></div><h3 id="匿名函数"><a href="#匿名函数" class="header-anchor">#</a> 匿名函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//3.匿名函数</span>
        <span class="token comment">//顾名思义,匿名函数就是没有名字的函数,一般会用作一个参数或者作为一个返回值来使用,通常来保存它的引用</span>
        <span class="token comment">//(1)setTimeout中的参数</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;作为一个参数来使用&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//(2)数组方法中的参数</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> arr1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> item <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//map 返回一个新的数组  不会改变原始数组</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//(3)匿名函数作为一个返回值</span>
        <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> a3 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> a3 <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 在实际开发中,当匿名函数作为一个返回值时,为了方便调试,常常会为匿名函数添加一个名字,这样在开发者工具中更好调试</span>

        <span class="token comment">//注意：匿名函数和闭包！匿名函数是函数,函数是闭包的形成条件,仅仅有点关联</span>
</code></pre></div><h3 id="自执行函数"><a href="#自执行函数" class="header-anchor">#</a> 自执行函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//4.自执行函数</span>
        <span class="token comment">//自执行函数就是匿名函数一个非常重要的应用场景。因为函数会产生独立的作用域,</span>
        <span class="token comment">//因此我们常常利用自执行函数来模拟块级作用域,并进一步在此基础上实现模块化的运用</span>
        <span class="token comment">// (function(){})()</span>
        <span class="token comment">//模块化很重要 自执行函数能更好的体现  模块可以包括：私有变量、私有方法、公有方法、公有变量、公有方法。</span>
        <span class="token comment">//当我们使用自执行函数创建一个模块时,也意味着。外界已经无法访问该模块内部的任何属性和方法,</span>
        <span class="token comment">//好在闭包,作为模块化之间能相互交流的桥梁,让模块化能够在我们的控制之下,选择性对外公开属性和方法</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 私有变量量</span>
            <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;iskr&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">// 私有方法</span>
            <span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">'你的名字叫'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'对吗？'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">// 公有方法</span>
            <span class="token keyword">function</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> age<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 将引用保存在外部执行环境中,这是一种简单对外开发方法的方式</span>
            window<span class="token punctuation">.</span>getAge <span class="token operator">=</span> getAge<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使用者   </span>
        <span class="token keyword">var</span> demo <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="函数式编程"><a href="#函数式编程" class="header-anchor">#</a> 函数式编程</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 函数式编程</span>
        <span class="token comment">//当我们想使用一个函数时,其实就是想将一些功能、逻辑等封装起来以便使用。</span>
        <span class="token keyword">function</span> <span class="token function">arrCount</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//不赋值的话等于undefined  </span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">+=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//undefined+Number=NaN</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">//然后结果就为NAN </span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> arr8 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">arrCount</span><span class="token punctuation">(</span>arr8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//把逻辑封装起来</span>
        <span class="token keyword">function</span> <span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> item <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> res<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 以上是封装,以下是功能实现</span>
        <span class="token keyword">var</span> arrfn <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'u'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">getNumber</span><span class="token punctuation">(</span>arrfn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 在函数式编程实践中,我们封装了一个工具方法,专门用来找出一个数组中的所有number。</span>
        <span class="token comment">//而我们真正需要维护的代码则仅仅只有两行。我们只需知道getNumber这个工具方法能做什么即可,</span>
        <span class="token comment">// 而不关心它的内部实现。这样代码就会简洁很多,维护起来也非常简单。</span>
        <span class="token comment">// 好比：在现实生活中很多场景一样,例如点外卖。只需要在App下单,然后等外卖小哥把食物送到我们手中就行。</span>
        <span class="token comment">// 我们不关注如何做出来的,也不关注外卖小哥如何送过来的。这种更关心结果的思维方式,就是函数式编程。</span>
</code></pre></div><h3 id="函数是一等公民"><a href="#函数是一等公民" class="header-anchor">#</a> 函数是一等公民</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>        <span class="token comment">// 函数是一等公民</span>
        <span class="token comment">// 所谓的&quot;一等公民&quot;,其实就是普通公民,也就是说,函数其实没什么特殊的,我们可以像对待任何其他数据类型一样一样对待函数。</span>
        <span class="token comment">// 可以把函数赋值给一个变量</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn8</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// 也可以把函数存在数组里。</span>
        <span class="token keyword">function</span> <span class="token function">fn9</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> a9 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">+</span> a9<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">add9</span><span class="token punctuation">(</span><span class="token parameter">a9<span class="token punctuation">,</span> b9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a9 <span class="token operator">+</span> b9<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn9</span><span class="token punctuation">(</span>add9<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//70</span>
        <span class="token comment">// 还可以把函数作为另一个函数运行的返回值</span>
        <span class="token keyword">function</span> <span class="token function">add10</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> _add <span class="token operator">=</span> <span class="token function">add10</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add10</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//110</span>

        <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;5000ms后执行&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//糟糕的写法</span>
        <span class="token keyword">var</span> t1 <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//正确的写法</span>
</code></pre></div><p>思考下面代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// function getUser(path, callback) {</span>
        <span class="token comment">//     // return $.get(path, function(info) {//有被包裹</span>
        <span class="token comment">//     //     return callback(info);</span>
        <span class="token comment">//     // })</span>

        <span class="token comment">//     return $.get(path, callback);//有被包裹</span>
        <span class="token comment">// }</span>
        <span class="token comment">// 直接简化成</span>
        <span class="token comment">// var getUser = $.get();</span>

        <span class="token comment">// getUser('/api/user', function(res) {</span>
        <span class="token comment">//     console.log(res);</span>
        <span class="token comment">// });</span>

        <span class="token comment">// 等同于</span>
        <span class="token keyword">function</span> <span class="token function">add_ab</span><span class="token punctuation">(</span><span class="token parameter">a11<span class="token punctuation">,</span> b11</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a11 <span class="token operator">+</span> b11<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> other <span class="token operator">=</span> add_ab<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">other</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="纯函数"><a href="#纯函数" class="header-anchor">#</a> 纯函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 纯函数</span>
        <span class="token comment">// 相同的输入总会得到相同的输出,并且不会产生副作用的函数,就是纯函数</span>
        <span class="token comment">// 此方法改变了其值 得到了一个新的值时 ,这是就不是一个纯函数</span>
        <span class="token keyword">var</span> soure <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        soure<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//纯函数返回的是 【2,3】 soure不变</span>
        <span class="token comment">// 不纯函数会改变其soure的值</span>
        soure<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//不纯函数</span>
        soure<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除数组的最后一个元素</span>
        soure<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在元素末尾位置添加一个元素</span>
        soure<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除并返回第一个元素,</span>
        soure<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在数组开头添加一个元素</span>
        soure<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回数组顺序</span>
        <span class="token comment">// 纯函数的话不会改变soure的值</span>
        <span class="token keyword">var</span> soure <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        soure<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//连接两个数组</span>
        soure<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将数组的所有元素放入一个字符串</span>
        <span class="token comment">//纯函数的可移植性</span>
        <span class="token comment">// 没有改变原字符串的值,并输出了我们想要的结果</span>
        <span class="token keyword">function</span> <span class="token function">getParams</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">var</span> search <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//将字符串分割成数组</span>
            <span class="token keyword">var</span> arr <span class="token operator">=</span> search<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">&quot;https://www.bilibili.com/?spm_id_from=333.788.b_696e7465726e6174696f6e616c486561646572.1&amp;name=iskr&amp;nv=男&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token function">getParams</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以查看开发者工具理解代码执行过程</span>
        <span class="token comment">// 纯函数的可缓存性</span>

        <span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>


            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">withProcess</span><span class="token punctuation">(</span><span class="token parameter">base</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> date <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>date<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//判断数据是否在缓存里面,如果再缓存里,直接返回出去这个值</span>
                    <span class="token keyword">return</span> cache<span class="token punctuation">[</span>date<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token function">base</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果缓存里没有这个值则就在请求一次方法</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> _process <span class="token operator">=</span> <span class="token function">withProcess</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">_process</span><span class="token punctuation">(</span><span class="token string">'2020-10-20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">_process</span><span class="token punctuation">(</span><span class="token string">'2020-10-21'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">_process</span><span class="token punctuation">(</span><span class="token string">'2020-10-21'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">_process</span><span class="token punctuation">(</span><span class="token string">'2020-10-21'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="高阶函数"><a href="#高阶函数" class="header-anchor">#</a> 高阶函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//高阶函数</span>
        <span class="token keyword">function</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token parameter">name1<span class="token punctuation">,</span> age1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name1 <span class="token operator">=</span> name1<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age1 <span class="token operator">=</span> age1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        person1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName1</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person1</span><span class="token punctuation">(</span><span class="token string">&quot;iskr&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">getName1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 构造函数其实就是普通函数,而this是在函数运行的时候才确认的。</span>
        <span class="token comment">// new导致了构造函数变得特别</span>
        <span class="token comment">// 模拟关键字new的能力</span>
        <span class="token comment">// 将构造函数以参数形式传入</span>
        <span class="token keyword">function</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token parameter">fnc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 声明一个中间对象,该对象为最终返回的实例</span>
            <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fnc<span class="token punctuation">.</span>prototype <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 将实例的原型指向构造函数的原型</span>
                res<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fnc<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// ret 为构造函数执行的结果,这里是通过apply,</span>
            <span class="token comment">// 将构造函数内部的this指向修改为res,即为实例对象</span>
            <span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">fnc</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//传递this指向,参数以数组的方式传递</span>
            <span class="token comment">//当在构造函数中明确指定了返回对象时,那么new的执行结果就是该返回对象</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> ret <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> ret <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ret <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 如果没有明确指定的返回对象,则默认返回res,这个res就是实例对象</span>

            <span class="token keyword">return</span> res<span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        <span class="token comment">// 模拟使用New方法</span>
        <span class="token keyword">var</span> pe1 <span class="token operator">=</span> <span class="token function">New</span><span class="token punctuation">(</span>person1<span class="token punctuation">,</span> <span class="token string">&quot;iskr&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> pe2 <span class="token operator">=</span> <span class="token function">New</span><span class="token punctuation">(</span>person1<span class="token punctuation">,</span> <span class="token string">&quot;实例&quot;</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pe1<span class="token punctuation">.</span><span class="token function">getName1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pe2<span class="token punctuation">.</span><span class="token function">getName1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 凡事接收一个函数作为参数的函数就是高阶函数</span>
</code></pre></div><p>map方法封装的过程</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 数组map方法封装的思考过程</span>
        <span class="token keyword">var</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//声明一个被遍历的数据array1</span>
        <span class="token comment">// map方法第一个参数为回调函数,该函数拥有三个参数</span>
        <span class="token comment">// 第一个参数表示array1数组中的每一项</span>
        <span class="token comment">// 第二个参数表示当前遍历的索引值</span>
        <span class="token comment">// 第三个参数表示数组本身</span>
        <span class="token comment">// 该函数中的this指向map方法的第二个参数,若参数不存在,则thi指向丢失就是undefined</span>
        <span class="token keyword">var</span> newArray1 <span class="token operator">=</span> array1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> i<span class="token punctuation">,</span> array1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> i<span class="token punctuation">,</span> array1<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            a<span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">//指向为{a:1}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//为新的一个数组,由map遍历结果组成,不是纯函数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//利用高阶函数的方式来封装_map方法功能和map一样</span>
        <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_map</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 首先定义一个数组来保存每一项的运算结果,最后返回</span>
            <span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
                <span class="token comment">// 封装 for 循环过程</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 将每一项的运算操作丢进fn里,</span>
                    <span class="token comment">// 利用call方法指定fn的this指向与具体参数</span>
                    temp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;报错：&quot;</span> <span class="token operator">+</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> temp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> narray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">_map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>narray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="高阶函数的应用思路"><a href="#高阶函数的应用思路" class="header-anchor">#</a> 高阶函数的应用思路</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 高阶函数的使用思路正在于此,它其实是一个封装*公共逻辑*的过程。</span>
        <span class="token comment">// 强化模块化思维  demo</span>
        <span class="token comment">// 封装一个高阶函数withLogin,用来判断当前用户状态</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 用随机数的方式来模拟一个获取用户信息的方式</span>
            <span class="token keyword">var</span> <span class="token function-variable function">getLogin</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0-10的随机数</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//模2不为零的话return</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span>
                        login<span class="token operator">:</span> <span class="token boolean">false</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    login<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    userinfo<span class="token operator">:</span> <span class="token punctuation">{</span>
                        uname<span class="token operator">:</span> <span class="token string">'iskr'</span><span class="token punctuation">,</span>
                        vip<span class="token operator">:</span> <span class="token number">8</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    userid<span class="token operator">:</span> <span class="token string">'666666'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">var</span> <span class="token function-variable function">withLogin</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">basivFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> loginInfo <span class="token operator">=</span> <span class="token function">getLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 将loginInfo以参数的形式传入基础函数中</span>
                    <span class="token keyword">return</span> <span class="token function">basivFn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> loginInfo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//loginInfo函数参数   把return的参数给renderIndex</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// 定义接口供外面调用</span>
            window<span class="token punctuation">.</span>withLogin <span class="token operator">=</span> withLogin<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 使用上面定义好的接口</span>
            <span class="token keyword">var</span> withLogin <span class="token operator">=</span> window<span class="token punctuation">.</span>withLogin<span class="token punctuation">;</span>

            <span class="token keyword">var</span> <span class="token function-variable function">renderIndex</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">loginInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 在这里处理Index页面的逻辑</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>loginInfo<span class="token punctuation">.</span>login<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// 处理登录之后的逻辑</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token comment">// 处理未登录的逻辑</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;未登录&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// 对外暴露接口是,使用高阶函数包一层,来判断当前用户的登录状态</span>
            window<span class="token punctuation">.</span>renderIndex <span class="token operator">=</span> <span class="token function">withLogin</span><span class="token punctuation">(</span>renderIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            window<span class="token punctuation">.</span><span class="token function">renderIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 当我们使用高阶函数封装每一个页面的公共逻辑之后,会发现我们的代码逻辑变得非常清晰,而且更加统一。</span>
        <span class="token comment">// 当在写新的页面逻辑是,就在此基础之上完成即可,二部用去考虑封装过的逻辑</span>
        <span class="token comment">// 柯里化</span>
        <span class="token comment">// 柯里化是指这样一个函数（假设叫做createCurry）,它接收函数A作为参数,</span>
        <span class="token comment">// 运行后能够返回一个新的函数,并且这个新的函数能够处理函数A的剩余参数</span>
        <span class="token comment">// 把事情弄复杂化了,但是复杂化的同时使函数更加的自由化</span>

        <span class="token comment">//##代码组合  回顾高阶函数的应用</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> env <span class="token operator">=</span> <span class="token punctuation">{</span>
                isMobile<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                isAndroid<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                isIOS<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> ua <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">;</span>
            env<span class="token punctuation">.</span>isMobile <span class="token operator">=</span> <span class="token string">'ontouchstart'</span> <span class="token keyword">in</span> document<span class="token punctuation">;</span>
            env<span class="token punctuation">.</span>isAndroid <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">android</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            env<span class="token punctuation">.</span>isIOS <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">iphone</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> <span class="token function-variable function">withEnvironment</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">basicFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">basicFn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            window<span class="token punctuation">.</span>withEnvironment <span class="token operator">=</span> withEnvironment<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ES6 ...args对参数不固定的写法</span>
        <span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> arity <span class="token operator">=</span> args<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> tag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> args<span class="token punctuation">[</span>args<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'funciton'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                tag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>arity <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> param <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                arity<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> newParam <span class="token operator">=</span> args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span>
                args<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除并返回最后一个元素</span>
                <span class="token comment">// newParam是上一个参数的运行结果,我们可以打印出来查看它的值</span>
                args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newParam<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newParam<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>arity <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 将操作目标放在最后一个参数,目标可能是一个函数</span>
                <span class="token comment">// 也可能是一个值,因此可以针对不同的情况做不同的处理</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        window<span class="token punctuation">.</span>renderIndex <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>withLogin<span class="token punctuation">,</span> withEnvironment<span class="token punctuation">,</span> renderIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">renderIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="柯里化函数"><a href="#柯里化函数" class="header-anchor">#</a> 柯里化函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 下面两个是等价</span>
        <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">_add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">_add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 利用封装的思路</span>
        <span class="token comment">// arity  用来标记剩余参数</span>
        <span class="token comment">// args 用来收集参数</span>
        <span class="token keyword">function</span> <span class="token function">createCurry</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> arity<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 第一次执行时,并不会传入arity,而是直接获取func参数的个数func.length</span>
            <span class="token keyword">var</span> arity <span class="token operator">=</span> arity <span class="token operator">||</span> func<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token comment">// 第一次执行也不会传入args,而默认为空数组</span>
            <span class="token keyword">var</span> args <span class="token operator">=</span> args <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> <span class="token function-variable function">wrapper</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 将wrapper中的参数收集到args中</span>
                <span class="token keyword">var</span> _args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> _args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 如果参数个数小于最初的func.length,则递归调用,继续收集参数</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>_args<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> arity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    arity <span class="token operator">-=</span> _args<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token function">createCurry</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> arity<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> wrapper<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 柯里化函数应用</span>
        <span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token parameter">reg<span class="token punctuation">,</span> targetString</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>targetString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> _check <span class="token operator">=</span> <span class="token function">createCurry</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// var checkPhone = _check(/^1[3456789]\d{9}$/);</span>
        <span class="token keyword">var</span> checkEmail <span class="token operator">=</span> <span class="token function">_check</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([a-zA-Z\d])(\w|\-)+@[a-zA-Z\d]+\.[a-zA-Z]{2,4}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkEmail</span><span class="token punctuation">(</span><span class="token string">&quot;iskr1024@gmail.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token comment">// console.log(checkPhone(&quot;15179505555&quot;));</span>
        <span class="token comment">// 在这个过程中可以发现,柯里化能够应付更加复杂的逻辑封装。当情况变得多变是,柯里化依然能够应付自如</span>

        <span class="token comment">// 普通思维封装map   把数组元素转换成百分数</span>
        <span class="token keyword">function</span> <span class="token function">getnewArr</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> item <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getnewArr</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 利用柯里化函数封装</span>
        <span class="token keyword">function</span> <span class="token function">_map</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> _newMap <span class="token operator">=</span> <span class="token function">createCurry</span><span class="token punctuation">(</span>_map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> getNewarr <span class="token operator">=</span> <span class="token function">_newMap</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> item <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getNewarr</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.12</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 过滤数组中的字符串</span>
        <span class="token keyword">function</span> <span class="token function">_filter</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> _newFilter <span class="token operator">=</span> <span class="token function">createCurry</span><span class="token punctuation">(</span>_filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> getNewfilter <span class="token operator">=</span> <span class="token function">_newFilter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> item <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getNewfilter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1,6,4</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 利用筛选</span>
            <span class="token keyword">var</span> _newFilter <span class="token operator">=</span> <span class="token function">createCurry</span><span class="token punctuation">(</span>_filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> find20 <span class="token operator">=</span> <span class="token function">_newFilter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">===</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">find20</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">455</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//20,20</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 柯里化魅力无穷</span>
        <span class="token comment">// 弊端：柯里化通用式里调用了arguments对象,使用了递归与闭包。柯里化的自由度是以牺牲了一定的性能为代价换来的。</span>
        <span class="token comment">// 只有情况变得复杂时,才是柯里化大显身手的时候。</span>

        <span class="token comment">// 面试题  柯里化</span>
        <span class="token comment">// add(1)(2)(3)(4)=10;</span>
        <span class="token comment">// add(1)(2)=3;</span>
        <span class="token comment">// add(1,2,3)(4)=10;</span>
        <span class="token comment">// add(1,2)(3,4,5)=10;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 第一次执行时,定义一个数组专门用来存储所有的参数；</span>
                <span class="token keyword">var</span> _args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ES5写法</span>
                <span class="token comment">// _args.push(...arguments); //add(1, 2, 3);  [1,2,3]   ES6写法</span>
                <span class="token comment">// 在内部声明一个函数,利用闭包的特性保存_args并收集所有的参数值；</span>
                <span class="token keyword">var</span> <span class="token function-variable function">adder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> <span class="token function-variable function">_adder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        _args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> _adder<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token comment">// 利用隐式转换的特性,当最后执行时隐式转换,计算最终的值并返回</span>
                    _adder<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> _args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//计算数组的总和</span>
                            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> _adder<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token operator">...</span>_args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">var</span> n1 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//15</span>
            <span class="token comment">// 可以利用隐式转换的特性参与计算</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n1 <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//25</span>
            <span class="token comment">// 也可以继续传入参数,得到的结果再次利用隐式转换参与计算</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">n1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//35</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">demo1</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">demo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="组合函数"><a href="#组合函数" class="header-anchor">#</a> 组合函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//代码组合  回顾高阶函数的应用</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> env <span class="token operator">=</span> <span class="token punctuation">{</span>
                isMobile<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                isAndroid<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                isIOS<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">var</span> ua <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">;</span>
            env<span class="token punctuation">.</span>isMobile <span class="token operator">=</span> <span class="token string">'ontouchstart'</span> <span class="token keyword">in</span> document<span class="token punctuation">;</span>
            env<span class="token punctuation">.</span>isAndroid <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">android</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            env<span class="token punctuation">.</span>isIOS <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">iphone</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> <span class="token function-variable function">withEnvironment</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">basicFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">basicFn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            window<span class="token punctuation">.</span>withEnvironment <span class="token operator">=</span> withEnvironment<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> arity <span class="token operator">=</span> args<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> tag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
                tag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>arity <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> param <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                arity<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> newParam <span class="token operator">=</span> args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span>
                args<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>arity<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除并返回最后一个元素</span>
                <span class="token comment">// newParam是上一个参数的运行结果,我们可以打印出来查看它的值</span>
                args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newParam<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>arity <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 将操作目标放在最后一个参数,目标可能是一个函数</span>
                <span class="token comment">// 也可能是一个值,因此可以针对不同的情况做不同的处理</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token number">20</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token number">30</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>fn1<span class="token punctuation">,</span> fn2<span class="token punctuation">,</span> fn3<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//70</span>

        <span class="token comment">// var base = function() {</span>
        <span class="token comment">//     return arguments[0] + arguments[1];</span>
        <span class="token comment">// }</span>
        <span class="token comment">// var foo1 = function(fn) {</span>
        <span class="token comment">//     return fn.call(null, 20);</span>
        <span class="token comment">// }</span>
        <span class="token comment">// var foo2 = function(fn) {</span>
        <span class="token comment">//     return fn.call(null, 30);</span>
        <span class="token comment">// }</span>
        <span class="token comment">// var bs = compose(foo1, foo2)(base);</span>
        <span class="token comment">// console.log(bs());</span>
</code></pre></div><h2 id="面对对象"><a href="#面对对象" class="header-anchor">#</a> 面对对象</h2> <h3 id="对象定义"><a href="#对象定义" class="header-anchor">#</a> 对象定义</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.1对象被定义： 无序属性的集合,其属性可以包含基本值,对象或者函数</span>
<span class="token comment">// 这里person就是一个对象</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'iskr'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token comment">// value为函数</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// value 为对象</span>
    parent<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="创建对象"><a href="#创建对象" class="header-anchor">#</a> 创建对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.2创建对象</span>
<span class="token comment">// 可以通过关键字new来创建一个对象。</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 也可以通过字面量的形式创建对象。</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 当我们想给创建对象添加属性和方法时</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;iskr&quot;</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 也可以这样</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;iskr&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 访问属性的方式</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> _name <span class="token operator">=</span> <span class="token string">'name'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>_name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="构造函数与原型"><a href="#构造函数与原型" class="header-anchor">#</a> 构造函数与原型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.3构造函数与原型</span>
<span class="token comment">// 封装函数其实就是封装一些公共的逻辑与功能,通过传入参数的形式达到自定义的效果。当面对具有共同特征的一类事物是,就可以结合构造函数与原型的方式将这类事物封装成对象。</span>
<span class="token comment">// 构造函数</span>
<span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 具体某一个人特定的属性,通常放在构造函数中。</span>
<span class="token comment">// 所有人公共的方法与属性,通常会放在原型对象中。prototype</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 温习一下new关键字具体帮我们做了什么事情</span>
<span class="token comment">// 把函数以参数的形式传入</span>
<span class="token keyword">function</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 声明一个中间对象,该对象为最终返回的实例</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将实例的原型指向构造函数的原型</span>
        res<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fn<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ret为构造函数的执行结果,这里是通过apply,</span>
    <span class="token comment">// 将构造函数内部的this指向修改为res,即实例对象</span>
    <span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 当我们在构造函数中明确指定了返回对象</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> ret <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> ret <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ret <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 如果没有明确指定返回对象,则默认返回res,这个res就是实例对象</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1.先创建一个新的,空的实例对象。</span>
<span class="token comment">// 2.将实例对象的原型,指向构造函数的原型</span>
<span class="token comment">// 3.将构造函数内部的this,修改为指向实例</span>
<span class="token comment">// 4.最后返回该实例对象</span>
<span class="token keyword">var</span> p3 <span class="token operator">=</span> <span class="token function">New</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'Iskr'</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p3<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="公有方法和私有方法"><a href="#公有方法和私有方法" class="header-anchor">#</a> 公有方法和私有方法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 公有方法和私有方法</span>
<span class="token comment">// 在原型中声明的方法和属性我们称为公有属性与方法</span>
<span class="token comment">// 而在构造函数中声明一个方法是,每创建一个实例,该方法都会被重新创建一次。而在原型中的方法仅仅只会创建一次</span>
<span class="token comment">// 这也是我们称其为私有方法的原型之一。</span>
<span class="token keyword">function</span> <span class="token function">Per</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//私有方法</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'你访问了私有方法'</span><span class="token punctuation">;</span> <span class="token comment">//优先访问构造函数的方法、属性</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Per</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'你访问了公有方法！'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Per</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 可以通过in来判断对象是否拥有某一个方法、属性。无论是公有私有</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getName'</span> <span class="token keyword">in</span> per1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age'</span> <span class="token keyword">in</span> per1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
<span class="token comment">// 还可以检测所处的环境是否在移动端</span>
<span class="token comment">//var isMoblie = 'ontouchstart' in document; //因为只有移动端环境才有ontouchstart</span>
</code></pre></div><p>原型的简写方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.4更简单的原型写法</span>
<span class="token keyword">function</span> <span class="token function">Person_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token class-name">Person_1</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token class-name">Person_1</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token operator">:</span> Person_1<span class="token punctuation">,</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 以上就是三种写法喽</span>
</code></pre></div><h3 id="原型链"><a href="#原型链" class="header-anchor">#</a> 原型链</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.5原型链</span>
<span class="token comment">// 原型对象其实就是普通对象。几乎所有的对象都可以是原型对象,也可以是实例对象,还可以是构造函数,甚至可以身兼数职</span>
<span class="token comment">// 判断一个对象是否为一个对象的构造函数实例,可以使用instanceof关键词</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> istt <span class="token operator">=</span> foo <span class="token keyword">instanceof</span> <span class="token class-name">Foo</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>istt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 所有函数与对象都有有一个toString与valueOf方法,</span>
<span class="token comment">// 就是来源于Object.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;return a+b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 等价的原理就是</span>
add<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>add<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Function<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>add <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><h3 id="实例方法、原型方法、静态方法"><a href="#实例方法、原型方法、静态方法" class="header-anchor">#</a> 实例方法、原型方法、静态方法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.6 实例方法、原型方法、静态方法</span>

<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'bar in Foo'</span><span class="token punctuation">;</span> <span class="token comment">//实例方法</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'bar in static'</span><span class="token punctuation">;</span> <span class="token comment">//静态方法  直接挂载在构造函数上</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'bar in prototype'</span><span class="token punctuation">;</span> <span class="token comment">//原型方法</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.7继承</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 构造函数的继承比较简单,可以借助call/apply来实现。</span>
    <span class="token keyword">var</span> <span class="token function-variable function">Stu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gnv</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 通过call方法还原Person 构造函数中的所有处理逻辑</span>
        <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Stu<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gnv <span class="token operator">=</span> gnv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 等价于</span>
    <span class="token keyword">var</span> <span class="token function-variable function">Stu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gnv</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gnv <span class="token operator">=</span> gnv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 其实只需要让子类对象的原型成为父类对象的一个实例,然后通过__proto__访问父类的原型,这样就继承了父类原型中的方法属性</span>
    <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">proto<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个空对象</span>
        <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// 让这个新的空对象成为父类的实例</span>
        tmp<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> proto<span class="token punctuation">;</span>
        <span class="token comment">// 传入的方法都挂载到新的对象上,新的对象将作为子类对象的原型</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//defineProperties: 方法直接在一个对象上定义新的属性或修改现有属性，并返回该对象。</span>
        <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Stu</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不要忘记了重新指定构造函数</span>
        constructor<span class="token operator">:</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> Stu
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        getGrade<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gnv<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stu</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">getGrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="属性类型"><a href="#属性类型" class="header-anchor">#</a> 属性类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.8属性类型</span>
<span class="token comment">// 1.configurable：表示该属性是否能被delete删除,其值为false是,其他特性特性也不能被改变。默认值为true</span>
<span class="token comment">// 2.enumerable:是否能枚举。级是否能被for-in遍历。默认是true</span>
<span class="token comment">// 3.writable:是否能被修改值,默认为true</span>
<span class="token comment">// 4.value:该属性的具体值时多少,默认为undefined</span>
<span class="token comment">// 5.get:当通过Person.name访问name的值时,set方法将被调用。该方法可以自定义设置值的具体方式。set的默认值为undefined</span>
<span class="token comment">// 6.set:当通过Person.name='iskr'设置name的值时,set方法将被调用。该方法可以自定义设置值的具体方式。set默认值为undefined</span>
<span class="token comment">// 注意:需要注意的是不能同时设置value、writable与get、set的值。</span>
<span class="token comment">// Object.defineProperty只能设置一个属性的属性特性</span>
<span class="token comment">// Object.defineProperties可以同时设置多个属性的特性</span>

<span class="token comment">// get/set</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'iskr'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">' in set'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Person<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&quot;hah&quot;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 注意:尽量同时设置get和set,如果、只设置了get,那么将无法设置该属性值,如果只设置了set,那么将无法读取该属性的属性值。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> Person<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token punctuation">{</span>
            value<span class="token operator">:</span><span class="token string">'iskr'</span><span class="token punctuation">,</span>
            configurable<span class="token operator">:</span><span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token number">19</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">=</span>value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Person<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> dqu<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//读取属性的特性值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dqu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="jquery封装"><a href="#jquery封装" class="header-anchor">#</a> JQuery封装</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token constant">ROOT</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 构造函数</span>
    <span class="token keyword">var</span> <span class="token function-variable function">jQuery</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在该方法中直接返回new创建的实例,</span>
        <span class="token comment">// 因此这里的init才是真正的构造函数</span>
        <span class="token comment">// 3.在构造函数里面返回了init实例对象</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    jQuery<span class="token punctuation">.</span>fn <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
        constructor<span class="token operator">:</span> jQuery<span class="token punctuation">,</span>
        <span class="token comment">// 1.在原型上添加了init方法</span>
        <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> elm<span class="token punctuation">,</span> selector<span class="token punctuation">;</span>
            elm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> elm<span class="token punctuation">;</span>

            <span class="token comment">// 在Jquery中返回的是一个由所有原型属性方法组成的数组,</span>
            <span class="token comment">// 在这里做了简化,直接返回this既可</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 在原型上添加一堆方法</span>
        <span class="token function-variable function">toArray</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2.之后又将init的原型指向了jquery.prototype</span>
    jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>prototype <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>

    <span class="token comment">// 实现jquery的两种扩展方法</span>
    jQuery<span class="token punctuation">.</span>extend <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">extend</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在Jquery源码中根据参数不同进行不同的判断,这里假设只有一种方式</span>
        <span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> copy<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            copy <span class="token operator">=</span> options<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
            target<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> copy<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// jquery利用上面实现的扩展机制,添加了许多方法</span>

    <span class="token comment">// 添加静态方法</span>
    jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">ajax</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ajax'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">type</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">isFunction</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">query</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">attr</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">prop</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">val</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4.最后暴露接口将$与方法jquery对等起来</span>
    <span class="token constant">ROOT</span><span class="token punctuation">.</span>jQuery <span class="token operator">=</span> <span class="token constant">ROOT</span><span class="token punctuation">.</span>$ <span class="token operator">=</span> jQuery<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="es6与模块化"><a href="#es6与模块化" class="header-anchor">#</a> ES6与模块化</h2> <h3 id="常用语法知识"><a href="#常用语法知识" class="header-anchor">#</a> 常用语法知识</h3> <ol><li>声明一个引用可以改变的变量时用let</li> <li>声明一个引用不能被改变的变量时使用const</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token punctuation">{</span>
            <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// console.log(a);//a is not defined</span>
        <span class="token comment">// console.log(b);//undefined</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// arr=4; Uncaught TypeError: Assignment to constant variable.</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当声明一个引用数据类型时，也会使用const。尽管可能改变该数据的值，但是必须保持的它引用不变</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> temp <span class="token operator">=</span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">// console.log(temp);</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <ol><li><p>与function相比，箭头函数是用起来更加舒服的一种用法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> 		<span class="token comment">// ES5</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ES6</span>
        <span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token comment">// ES5</span>
        <span class="token keyword">var</span> <span class="token function-variable function">foo1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ES6</span>
        <span class="token keyword">const</span> <span class="token function-variable function">foo2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre></div></li> <li><h3 id="函数内部this指向"><a href="#函数内部this指向" class="header-anchor">#</a> 函数内部this指向</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">//普通写法</span>
	<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'iskr'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
            getName<span class="token operator">:</span> getName
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> other <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'other'</span>
        <span class="token punctuation">}</span>

        <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//独立调用，this指向undefined，并自动转换成window</span>
        person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//被person调用，this指向person</span>
        <span class="token function">getName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//call修改了this指向，指向other</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">//ES6</span>
	<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'iskr'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'person'</span><span class="token punctuation">,</span>
            getName<span class="token operator">:</span> getName
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> other <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'other'</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 箭头函数中的this，就是声明函数是所处上下文中的this，它不会被其他方式所改变。</span>
        <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr</span>
        person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr</span>
        <span class="token function">getName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr	</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// 在实践中，常常会遇到this在传递过程中发生改变，因此带来的困扰</span>
        <span class="token keyword">var</span> <span class="token function-variable function">Mto</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Mto</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
            coustructoe<span class="token operator">:</span> Mto<span class="token punctuation">,</span>
            <span class="token function-variable function">do</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                document<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mto</span><span class="token punctuation">(</span><span class="token string">'名字'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
        <span class="token comment">//用箭头函数就能解决此问题</span>
        <span class="token keyword">var</span> <span class="token function-variable function">Mto</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Mto</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
            coustructoe<span class="token operator">:</span> Mto<span class="token punctuation">,</span>
            <span class="token function-variable function">do</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                document<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mto</span><span class="token punctuation">(</span><span class="token string">'名字'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//名字</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// 除此 arguments还有一个需要注意的地方，箭头含糊中没有arguments对象</span>
        <span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(arguments);</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 0: 1</span>
        <span class="token comment">// 1: 2</span>
        <span class="token comment">// callee: ƒ (a,b)</span>
        <span class="token comment">// length: 2</span>
        <span class="token comment">// Symbol(Symbol.iterator): ƒ values()</span>

        <span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(arguments);</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Uncaught ReferenceError: arguments is not defined</span>
</code></pre></div></li></ol> <h3 id="模本字符串"><a href="#模本字符串" class="header-anchor">#</a> 模本字符串</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 模板字符串</span>
        <span class="token comment">// 模板字符串为了解决传统字符串拼接不便利而出现的</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span>
        <span class="token keyword">var</span> str <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token string">'+'</span> <span class="token operator">+</span> b <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1+2=3</span>
        <span class="token comment">// ES6</span>
        <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">+</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a <span class="token operator">+</span> b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1+2=3</span>

        <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div&gt;
        一个盒子
        &lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
        &lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;
        &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 输出</span>
        <span class="token comment">// &lt;div&gt;</span>
        <span class="token comment">// 一个盒子</span>
        <span class="token comment">// &lt;p&gt;1&lt;/p&gt;</span>
        <span class="token comment">// &lt;span&gt;2&lt;/span&gt;</span>
        <span class="token comment">// &lt;/div&gt;</span>
</code></pre></div><h3 id="解构结构"><a href="#解构结构" class="header-anchor">#</a> 解构结构</h3> <ol><li><p>解构结构是一种从对象或者数组中取得值的一种全新的写法方式。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> tom <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'isll'</span><span class="token punctuation">,</span>
            age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
            job<span class="token operator">:</span> <span class="token string">'JavaScript'</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 传统获取值</span>
        <span class="token keyword">var</span> name <span class="token operator">=</span> tom<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token keyword">var</span> age <span class="token operator">=</span> tom<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//isll</span>
        <span class="token comment">// ES6</span>
        <span class="token keyword">var</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> tom<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskll</span>
</code></pre></div></li> <li><p>给变量指定默认值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// 如果数据中能找到name，则变量的值与数据中相等;若找不到，则使用默认值</span>
        <span class="token keyword">var</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">&quot;iskr&quot;</span><span class="token punctuation">,</span> status <span class="token operator">=</span> <span class="token string">&quot;厉害&quot;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> tom<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//isll,厉害</span>
        <span class="token comment">// obj1将job键名替换掉了，job失效</span>
        <span class="token keyword">var</span> <span class="token punctuation">{</span> job<span class="token operator">:</span> obj1 <span class="token punctuation">}</span> <span class="token operator">=</span> tom<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> pelples <span class="token operator">=</span> <span class="token punctuation">{</span>
            counts<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
            detail<span class="token operator">:</span> <span class="token punctuation">{</span>
                iskr<span class="token operator">:</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> <span class="token string">'iskr'</span><span class="token punctuation">,</span>
                    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
                    job<span class="token operator">:</span> <span class="token string">'recat'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>获取iskr对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">const</span> <span class="token punctuation">{</span> detail<span class="token operator">:</span> <span class="token punctuation">{</span> iskr <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> pelples<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iskr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{name: &quot;iskr&quot;, age: 18, job: &quot;recat&quot;}</span>
        <span class="token comment">// 直接获取job</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> detail<span class="token operator">:</span> <span class="token punctuation">{</span> iskr<span class="token operator">:</span><span class="token punctuation">{</span>job<span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> pelples<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//recat</span>
</code></pre></div></li> <li><p>数组的解析结构</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 数组的解析结构</span>
        <span class="token keyword">var</span> arrNum<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span><span class="token operator">=</span>arrNum<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">]</span><span class="token operator">=</span>arrNum<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 与对象不同的是，数组中变量和值的关系与序号是一一对应的，这是一个有序的对应关系。而对象则根据属性名一一对应，这是一个无序的对应关系。</span>

</code></pre></div></li></ol> <h3 id="展开运算符"><a href="#展开运算符" class="header-anchor">#</a> 展开运算符</h3> <ol><li><p>在ES6中，使用...来表示展开运算符，它可以展开数组对象</p></li> <li><p>解析数组</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 首先声明一个数组</span>
        <span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 其声明另外一个数组，我们期望新数组中包含数组arr1的所有元素</span>
        <span class="token comment">// 因此可以用展开运算符...</span>
        <span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1, 2, 3, 4, 5, 6]</span>
</code></pre></div></li> <li><p>解析对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 当然对象也可</span>
        <span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
            a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            c<span class="token operator">:</span> <span class="token number">3</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>obj1<span class="token punctuation">,</span>
            d<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            e<span class="token operator">:</span> <span class="token number">5</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{a: 1, b: 2, c: 3, d: 4, e: 5}</span>
</code></pre></div></li> <li><p>运用到函数参数中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 在解析结构中，也常常使用展开运算符</span>
        <span class="token keyword">const</span> iskr <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'iskr'</span><span class="token punctuation">,</span>
            age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
            job<span class="token operator">:</span> <span class="token string">'JavaScript'</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> <span class="token operator">...</span>other <span class="token punctuation">}</span> <span class="token operator">=</span> iskr<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{age: 18, job: &quot;JavaScript&quot;}</span>

        <span class="token comment">// 求所有参数之和</span>
        <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">...</span>other</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> other<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m <span class="token operator">+</span> n<span class="token punctuation">)</span> <span class="token operator">+</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//45</span>
</code></pre></div></li></ol> <h3 id="promise详解"><a href="#promise详解" class="header-anchor">#</a> Promise详解</h3> <ol><li><p>异步与同步</p> <p>同步：是指当发起一个请求时，如果没得到请求结果，代码将会继续等待，直到得到结果，才会执行后面的代码。</p> <p>异步：是指当发起一个请求时，不会等待请求结果，而是直接继续执行后面的代码。</p> <p>模拟同步：使用<code>async/await</code>语法来模拟同步的效果</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">res</span><span class="token punctuation">(</span><span class="token string">&quot;成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 在该函数的基础上，可以使用async/await语法来模拟同步的效果</span>

        <span class="token keyword">var</span> <span class="token function-variable function">foo1</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//模拟了同步执行的结果</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//成功</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nextCode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 输出 一秒之后全部输出</span>
        <span class="token comment">// 成功</span>
        <span class="token comment">// nextCode</span>

        <span class="token comment">// 异步效果代码会有不同的输出结果</span>
        <span class="token keyword">var</span> <span class="token function-variable function">foo2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            f<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//成功</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nextCode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 输出</span>
        <span class="token comment">// nextCode 停顿一秒后在输出成功</span>
        <span class="token comment">// 成功</span>
</code></pre></div></li> <li><p>Promise</p> <p>Ajax：是网页与服务器进行数据交互的一种技术、我们可以通过服务端提供的接口，用Ajax向服务端请求我们需要的数据。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 简单的Ajax原生实现</span>
        <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://jsonplaceholder.typicode.com/posts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> res <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
                <span class="token comment">// console.log(res);</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>JSONP请求的一种解决方案</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            jsonp<span class="token operator">:</span> <span class="token string">'JSONP'</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> <span class="token string">'https://j.i8tq.com/weather2020/search/city.js'</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            time<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//新建一个js文件放进去   </span>
<span class="token keyword">const</span> <span class="token function-variable function">ajax</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nowJson <span class="token operator">=</span> params<span class="token punctuation">.</span>jsonp <span class="token operator">?</span> <span class="token function">jsonp</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">json</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//创建script标签并加入到页面中</span>
        <span class="token keyword">var</span> callbackName <span class="token operator">=</span> params<span class="token punctuation">.</span>jsonp<span class="token punctuation">;</span>
        <span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置传递给后台的回调参数名</span>
        params<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">'callback'</span><span class="token punctuation">]</span> <span class="token operator">=</span> callbackName<span class="token punctuation">;</span>
        <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">formatParams</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

        window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">jsonData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>script<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            params<span class="token punctuation">.</span>success <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//console.log(window[callbackName])</span>
        <span class="token comment">//console.log(params.url + '?' + data)</span>

        <span class="token comment">//url形式传参</span>
        <span class="token comment">//说明：下面的script加载资源后会返回一个自执行函数:[callbackName](responseData),这个形式就是去执行一个函数，函数的名字是一个参数</span>
        <span class="token comment">//      同时在windows对象上定义了这个函数:[callbackName] = function(responseData){},这时就会调用这个函数</span>
        script<span class="token punctuation">.</span>src <span class="token operator">=</span> params<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> data<span class="token punctuation">;</span>

        <span class="token comment">//为了得知此次请求是否成功，设置超时处理</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            script<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
                params<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    message<span class="token operator">:</span> <span class="token string">'超时'</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> params<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//格式化参数</span>
    <span class="token keyword">function</span> <span class="token function">formatParams</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 添加一个随机数，防止缓存</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'v='</span> <span class="token operator">+</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取随机数</span>
    <span class="token keyword">function</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000</span> <span class="token operator">+</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 请求方式，默认是GET</span>
        params<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">'GET'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 避免有特殊字符，必须格式化传输数据</span>
        params<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">formatParams</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token comment">// 实例化XMLHttpRequest对象</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// IE6及其以下版本</span>
            xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObjcet</span><span class="token punctuation">(</span><span class="token string">'Microsoft.XMLHTTP'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 监听事件，只要 readyState 的值变化，就会调用 readystatechange 事件</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// readyState属性表示请求/响应过程的当前活动阶段，4为完成，已经接收到全部响应数据</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> status <span class="token operator">=</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">;</span>
                <span class="token comment">// status：响应的HTTP状态码，以2开头的都是成功</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                    <span class="token comment">// 判断接受数据的内容类型</span>
                    <span class="token keyword">var</span> type <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'xml'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>responseXML<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        response <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseXML<span class="token punctuation">;</span> <span class="token comment">//Document对象响应</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        response <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//JSON响应</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        response <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span> <span class="token comment">//字符串响应</span>
                    <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token comment">// 成功回调函数</span>
                    params<span class="token punctuation">.</span>success <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    params<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 连接和传输数据</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 三个参数：请求方式、请求地址(get方式时，传输数据是加在地址后的)、是否异步请求(同步请求的情况极少)；</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>type<span class="token punctuation">,</span> params<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> params<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>type<span class="token punctuation">,</span> params<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//必须，设置提交时的内容类型</span>
            xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 传输数据</span>
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//全局导出   </span>
window<span class="token punctuation">.</span>ajax<span class="token operator">=</span>ajax<span class="token punctuation">;</span>

</code></pre></div><p>​		在Ajax的原生实现中，利用onreadystatechange事件，只有当该事件触发并且符合一定条件是，才能拿到我们想要的数据，之后才能开始处理数据。</p> <p>​		这样做看上去并没有什么，但如果这个时候，还需要做另外一个Ajax请求，那么这个新的Ajax请求中的一个参数，则必须从上一个Ajax请求中获取，这个时候我们就不得不这样做了。</p> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wTzPx7p1-1604546278790)(C:\Users\19752\AppData\Roaming\Typora\typora-user-images\image-20201103131641299.png)]</p> <p>​		当第三个Ajax(甚至更多)仍然依赖上一个请求的时候，此时的代码就像变成了一场灾难。我们在需要不停的嵌套回调函数，以确保下一个接口所需要的参数正确性。这样的灾难，我们称之为<code>回调地狱</code>。</p> <p>​		为了解决回调地狱，为了使代码更具有可以读性和可维护性，我们需要将数据请求与数据处理区分开来。</p> <h3 id="当我们想要确保某些代码在某某之后执行时"><a href="#当我们想要确保某些代码在某某之后执行时" class="header-anchor">#</a> 当我们想要确保某些代码在某某之后执行时</h3> <p>可以利用函数调用栈，将想要执行的代码放入回调函数中。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 一个简单的封装</span>
        <span class="token keyword">function</span> <span class="token function">want</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是我们想要执行的代码&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">want</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这里表示执行了一大堆各种代码&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 其他代码执行完毕后，最后在执行回调函数</span>
            want <span class="token operator">&amp;&amp;</span> <span class="token function">want</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>利用队列机制来确保我们想要执行的代码压后执行。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">function</span> <span class="token function">want</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是我们想要执行的代码&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">want</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 将想要执行的代码放在队列中后，根据事件循环机制</span>
            <span class="token comment">// 就不用将它放在最后面了，可以自由选择</span>
            want <span class="token operator">&amp;&amp;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//异步代码在后面执行</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这里表示执行了一大堆各种代码&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>与setTimeout类似，Promise也可以认为是一种任务分发器。它将任务分配到Promise队列中，通常的流程是首先先发起一个请求，然后等待请求，然后等待（等待时间无法确定）并处理请求结果。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> tag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;this is true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;this is false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//true</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//fasle</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Promise相关知识：</p> <ol><li><p>new Promise表示创建一个Prosime实例对象。</p></li> <li><p>Promise函数中的第一个参数为回调函数，也称之为executor。通常情况下，在这个函数中，会执行发起请求操作，并修改结果的状态值。</p></li> <li><p>请求结果有三种状态，分别是pending(<code>等待</code>中，表示还没有得到结果)、resolved(得到了我们想要的结果，可以<code>继续执行</code>)、以及rejected(得到错误的，或者不是我们期望的结果，<code>拒绝继续执行</code>)。请求结果的默认状态为pending。在executor函数中，可以分别使用resolved与reject将状态修改为对应的resolved与rejected。resolve、reject是executo函数的两个参数，它能够将请求结果的具体数据传递出去。</p></li> <li><p>Promise使用拥有then方法，可以用来处理当请求结果状态变成resolved时的逻辑。then的第一个参数为回调函数，该函数的参数是resolve传递出来的数据。</p></li> <li><p>Promise使用拥有catch方法，可以用来处理当请求结果状态变成rejected时的逻辑。catch的第一个参数为回调函数，该函数的参数是reject传递出来的数据。</p></li> <li><p>在结合案例看看把~</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;是一个数字&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;不是一个数字&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//是一个数字</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;next code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//next code 先执行</span>
</code></pre></div><p>​	可以简写</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>then方法因为返回的仍是一个Promise实例对象，因此then方法可以嵌套使用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">&quot;不是一个数字&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6</span>
            <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//7</span>
            <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//8</span>
            <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//9</span>
            <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
            <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;next code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//next code 先执行</span>
</code></pre></div><p>封装一个原生Ajax请求</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">function</span> <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                                <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token comment">// 得到正确的结果修改状态并将数据传递出去</span>
                                <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                            <span class="token comment">// 得到错误结果并抛出异常</span>
                            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 封装好之后，使用就很简单了</span>
        <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">'http://jsonplaceholder.typicode.com/posts'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      		<span class="token comment">//处理成功的结果      </span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cacth</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="promise-all"><a href="#promise-all" class="header-anchor">#</a> Promise.all</h3> <p>​	当有一个Ajax请求，它的参数需要另外两个或者甚至更多个请求都有返回结果之后才能确定是，就需要用到Promise.all来帮助我们应对这个场景。</p> <p>​	Promise.all接收一个Promise对象组成的数组作为参数，当这个数组中<strong>所有的Promise对象状态都变成resolved或者rejected时</strong>，它才会去调用then方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">var</span> ulr1 <span class="token operator">=</span> <span class="token string">'http://jsonplaceholder.typicode.com/posts'</span><span class="token punctuation">;</span>
        <span class="token comment">// var url2 = '';</span>
        <span class="token keyword">var</span> url2 <span class="token operator">=</span> <span class="token string">'http://jsonplaceholder.typicode.com/posts'</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">rendAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getJSON</span><span class="token punctuation">(</span>ulr1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getJSON</span><span class="token punctuation">(</span>url2<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">rendAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="promise-race"><a href="#promise-race" class="header-anchor">#</a> Promise.race</h3> <p>​	与Promise.all相似的是。Promise.race也是以一个Promise对象组成的数组作为参数，不同的是，只有数组当中一个Promise状态变成resolved或者rejected时就调用then方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// var url1 = '';   </span>
        <span class="token keyword">var</span> url2 <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> url1 <span class="token operator">=</span> <span class="token string">'http://jsonplaceholder.typicode.com/posts'</span><span class="token punctuation">;</span>
        <span class="token comment">// var url2 = 'http://jsonplaceholder.typicode.com/posts';</span>
        <span class="token keyword">function</span> <span class="token function">rendRace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getJSON</span><span class="token punctuation">(</span>url1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getJSON</span><span class="token punctuation">(</span>url2<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">rendRace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//SyntaxError: Unexpected token &lt; in JSON at position 0</span>
            <span class="token comment">//at JSON.parse (&lt;anonymous&gt;)</span>
            <span class="token comment">//at XMLHttpRequest.xhr.onreadystatechange (ES6-4.html:108)</span>
      		<span class="token comment">//输出结果有点与的意思&amp;&amp;遇假则假;      </span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="async-await"><a href="#async-await" class="header-anchor">#</a> async/await</h3> <ol><li><p>异步问题不仅可以使用前面学到的Promise来解决。还可以用async/await来解决。</p></li> <li><p>async/await是ES7中新增的语法，虽然现在最新的Chrome浏览器已经支持该语法，但在实际使用中，仍需要构建工具配合。</p></li> <li><p>async的具体使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">30</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">30</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Promise {&lt;fulfilled&gt;: 30}</span>
        <span class="token comment">// __proto__: Promise</span>
        <span class="token comment">// [[PromiseState]]: &quot;fulfilled&quot;</span>
        <span class="token comment">// [[PromiseResult]]: 30</span>
</code></pre></div><p>总结上边：可以发现fn函数运行后返回的是一个标准的Promise对象，因此可以猜想async其实是Promise的一个语法糖。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//30</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>await的含义就是等待，意思就是让代码等待await后面的函数运行完并且有了结果之后，才会继续执行下面的代码。这这正是同步的效果。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> <span class="token function-variable function">foo</span><span class="token operator">=</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> t<span class="token operator">=</span><span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'next code'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 30</span>
            <span class="token comment">// next code</span>
        <span class="token punctuation">}</span>
        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>通过运行这个例子可以看出，在async函数中，当运行遇到await时，就会等待awati后面的函数运行完毕，而不会直接执行next code。</p> <p>如果直接async使用then方法，很显然使用async/await，代码结构会更简洁，逻辑也更清晰</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">const</span> <span class="token function-variable function">foo1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'next code'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">//差点就搞混了</span>
	<span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// next</span>
            <span class="token comment">//3000</span>
        <span class="token punctuation">}</span>
        <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="异常处理"><a href="#异常处理" class="header-anchor">#</a> 异常处理</h3> <p>在Promise中，是通过catch的方式捕获异常的，当使用async/await时，则是通过try/catch来捕获异常。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'new error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果有多个await函数，那么只返回第一个捕获到的异常</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'new error1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'new error2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">await</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//new error1只有一个结果</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="事件循环机制"><a href="#事件循环机制" class="header-anchor">#</a> 事件循环机制</h3> <ol><li><p>事件循环机制（Event Loop）是全面了解JavaScript代码执行顺序绕不开的一个重要知识点。虽然很多人知道这个知识点非常重要，但实际其实很少人能够真正理解它。特别是在ES6正式支持Promise之后，对于新标准中的时间循环的理解就变得更加重要。</p></li> <li><p>执行上下文（Execution context)</p></li> <li><p>函数调用栈（call stack)</p></li> <li><p>队列数据结构（queue)</p></li> <li><p>Promise</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3-'</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2-'</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2-5</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>setTimeout不是调用函数栈能解释清楚的。还是看队列</p> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-omTnpffK-1604546278791)(C:\Users\19752\Desktop\u=4007848708,1685442224&amp;fm=15&amp;gp=0.png)]		Javascript的一个特点就是单线程，但是很多时候我们仍然需要在不同的时间去执行不同的任务，例如给元素添加点击事件，设置一个定时器，或者发起Ajax请求。因此需要一个异步机制来达到这样的目的，事件循环机制也因此而来。</p> <p>​		每个JavaScript程序都拥有唯一一个事件循环，<strong>大多数代码的执行顺序是可以根据函数调用栈的规则来执行</strong>，而setTimeout/setInterval或者不同的事件绑定（click、mousedown等）中的代码，则是通过队列来执行的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'time1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pro2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'pro3'</span><span class="token punctuation">)</span><span class="token comment">//3</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pro4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'全局'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
        <span class="token comment">// pro2</span>
        <span class="token comment">//全局</span>
        <span class="token comment">//pro3</span>
        <span class="token comment">//pro4</span>
        <span class="token comment">//time1</span>
</code></pre></div></li></ol></li></ol></li></ol></li></ol> <h3 id="class和对象"><a href="#class和对象" class="header-anchor">#</a> Class和对象</h3> <p>语法简化写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'iskr'</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>

        <span class="token comment">// ES6</span>
        <span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">,</span>
            age
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr</span>
        <span class="token comment">// ES5</span>
        <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> name<span class="token punctuation">,</span>
            age<span class="token operator">:</span> age
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//18</span>
</code></pre></div><p>对象中的方法简写</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'iskr'</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> per1 <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">,</span>
            age<span class="token punctuation">,</span>
            <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//只要没有使用箭头函数，this就是还是原来的this</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> n <span class="token operator">=</span> per1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ES5</span>
        <span class="token keyword">const</span> per2 <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> name<span class="token punctuation">,</span>
            age<span class="token operator">:</span> age<span class="token punctuation">,</span>
            <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//只要没有使用箭头函数，this就是还是原来的this</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> n <span class="token operator">=</span> per1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以使用变量作为对象的属性 ，只需要用中括号包裹起来[]</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'iskr'</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> per<span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span>name<span class="token punctuation">,</span>
            <span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token operator">:</span>age
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//18</span>
</code></pre></div><h3 id="class"><a href="#class" class="header-anchor">#</a> class</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// ES5</span>
        <span class="token comment">// 构造函数</span>
        <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 原型方法:不会创建一次调用一次</span>
        <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ES6</span>
        <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//构造方法</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//原型方法</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
		<span class="token keyword">var</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr</span>
</code></pre></div><p>实际中不同的写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES6</span>
        <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//构造方法</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//原型方法</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">static</span> a<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//等同于 Person.a=10</span>
            c<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span><span class="token comment">//表示在构造函数中添加属性，在构造函数中等同于this.c=20</span>

            <span class="token comment">// 箭头函数的写法表示在构造函数中添加的方法，在构造函数中等同于this</span>
            <span class="token comment">// getAge=function(){}</span>
            <span class="token function-variable function">getAge</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//18</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20</span>
</code></pre></div><p>更多写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// ES6</span>
        <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//构造方法</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
                <span class="token keyword">let</span> _x <span class="token operator">=</span> x<span class="token punctuation">;</span><span class="token comment">//这才是私有变量</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">showX</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> _x<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//原型方法</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">static</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//等同于 Person.a=10</span>
            c <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment">//表示在构造函数中添加属性，在构造函数中等同于this.c=20</span>

            <span class="token comment">// 箭头函数的写法表示在构造函数中添加的方法，在构造函数中等同于this</span>
            <span class="token comment">// getAge=function(){}</span>
            <span class="token function-variable function">getAge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//18</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">showX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>_x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined访问不到</span>
</code></pre></div><h3 id="继承-2"><a href="#继承-2" class="header-anchor">#</a> 继承</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">//继承了上面的类 	</span>
	<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>job<span class="token operator">=</span>job<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>job<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">'职业:程序员'</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>区别ES5中利用<code>call/apply</code>继承构造函数而ES6使用<code>super</code></p> <p>练习：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token comment">//公有变量</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
                <span class="token keyword">let</span> _job <span class="token operator">=</span> job<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">showJob</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//私有变量访问方式</span>
                    <span class="token keyword">return</span> _job<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span><span class="token comment">//原型方法</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job<span class="token punctuation">,</span> hoby</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>hoby <span class="token operator">=</span> hoby<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">getHoby</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hoby<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token string">'编程'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我的名字叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">年龄：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">职业：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span><span class="token function">showJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">爱好：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span>hoby<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h3> <p>我是在Vue里面测试，大家可以自行百度装下环境。</p> <h3 id="基础语法"><a href="#基础语法" class="header-anchor">#</a> 基础语法</h3> <ul><li><p>import-from</p> <ol><li><p>首先需要知道的一个常识是，每一个文件都是一个单独的模块。</p></li> <li><p>通过import指令，可以在当前模块引入去其他的模块</p> <blockquote><p>import React from './react'</p></blockquote> <p>import 表示引入、加载一个模块</p> <p>React 可以理解成这个模块的名字。它是React模块创建时对外提供的所有接口组合成的对象。因此在代码中可以使用它来访问React模块提供的接口。例如React.Component。</p> <p>正因为此处是一个对象。因此可以使用解析结构的形式来直接获取某个特定的接口。</p> <blockquote><p>import React, { Component } from './react'</p></blockquote> <p>from 表示模块来自于哪里。</p> <p>此处的react表示模块的出处。通常情况下应该使用路径的形式表示，例如下面的./index.css,这样表示是因为构建工具能够自动识别安装在node_modules中的模块，而不用具体显示真实路径。此处可以理解成简写</p> <blockquote><p>import App from './App.js'</p> <p>// 通常会省略</p> <p>import App from './App'</p></blockquote></li></ol> <ul><li><p>export</p> <p>一个模块需要有向外提供接口的能力，在之前的例子中我们还没有学会模块化语法时。简单粗暴地将对外的接口放在window对象上，而在ES6的语法中，则是借助export命令来提供对外接口。</p> <blockquote><p>export const name1=&quot;iskr&quot;;</p> <p>export const name2=&quot;Javascript&quot;;</p></blockquote> <p>当在其他模块（index.js）引入该模块时，如果仅仅只是引入其中的某一个接口，那么可以这样做：</p> <blockquote><p>import {name1} from './module01'</p> <p>// 引入所有接口的方法</p> <p>import {name1,name2}from './module01';</p> <p>import * as module from './module01';</p></blockquote> <p>还可以通过export default 来对外提供接口，这种情况下，对外接口通常是一个对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> name1 <span class="token operator">=</span> <span class="token string">&quot;iskr&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> name2 <span class="token operator">=</span> <span class="token string">&quot;Javascript&quot;</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

  name1<span class="token punctuation">,</span>

  name2

<span class="token punctuation">}</span>

<span class="token comment">//针对上面引入代码</span>

<span class="token keyword">import</span> module01 <span class="token keyword">from</span> <span class="token string">'./module01'</span>
</code></pre></div><h3 id="例子"><a href="#例子" class="header-anchor">#</a> 例子</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//module02</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Person<span class="token punctuation">;</span>

<span class="token comment">//index.js</span>
<span class="token keyword">import</span> Person <span class="token keyword">from</span> <span class="token string">'./module02'</span>
<span class="token keyword">const</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>需要注意的是export default 命令一个模块只允许出现一次。不过可以同时拥有多个export与一个export default</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//module03.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this is function name is fn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Person<span class="token punctuation">;</span>

<span class="token comment">//index.js</span>
<span class="token keyword">import</span> module01 <span class="token keyword">from</span> <span class="token string">'./module01'</span>
<span class="token keyword">import</span> Person<span class="token punctuation">,</span><span class="token punctuation">{</span>bar<span class="token punctuation">,</span> fn<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./moudle03'</span>

<span class="token comment">// 还可以直接全部引入 实战中很少用</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> moudle03 <span class="token keyword">from</span> <span class="token string">'./moudle03'</span>

<span class="token comment">// module03</span>
module03<span class="token operator">=</span><span class="token punctuation">{</span>
    fn<span class="token operator">:</span>fn<span class="token punctuation">,</span>
    bar<span class="token operator">:</span>bar<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span>Person
<span class="token punctuation">}</span>
<span class="token comment">//执行调用</span>
<span class="token keyword">var</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'iskr'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//iskr</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//this is function name is fn</span>
</code></pre></div><h3 id="模块化开发"><a href="#模块化开发" class="header-anchor">#</a> 模块化开发</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//state.js</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// show: 0,</span>
    <span class="token comment">// backgroundColor: '#ccc',</span>
    <span class="token comment">// width: '200',</span>
    <span class="token comment">// height: '200'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> events <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">backgroundColor</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">width</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">height</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 往store中添加一个状态值</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">registerState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>store<span class="token punctuation">[</span>status<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'此状态已存在'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    store<span class="token punctuation">[</span>status<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 获取整状态树</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getStore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">;</span>

<span class="token comment">// 获取某个状态值</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getState</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 设置某个状态值</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    store<span class="token punctuation">[</span>state<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 可以理解为一个绑定的过程，因此命名为bind，在有的地方也称它为订阅</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">bind</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> eventFn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    events<span class="token punctuation">[</span>status<span class="token punctuation">]</span> <span class="token operator">=</span> eventFn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 移除绑定</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token parameter">status</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    events<span class="token punctuation">[</span>status<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> status<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 需要在状态值改变时触发UI的变化，因此在setState方法中调用了该方法</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>events<span class="token punctuation">[</span>status<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'未绑定任何事件！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    events<span class="token punctuation">[</span>status<span class="token punctuation">]</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//registerState.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> registerState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./state'</span>

<span class="token function">registerState</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">registerState</span><span class="token punctuation">(</span><span class="token string">'backgroundColor'</span><span class="token punctuation">,</span> <span class="token string">'#FFF'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">registerState</span><span class="token punctuation">(</span><span class="token string">'borderColor'</span><span class="token punctuation">,</span> <span class="token string">'#000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">registerState</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">registerState</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//utils.js</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">.</span>currentStyle <span class="token operator">?</span> obj<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">:</span> document<span class="token punctuation">.</span>defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//box.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> bind <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./state'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils'</span>
<span class="token keyword">import</span> <span class="token string">'./registerState'</span>

<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.target'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hide'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'hide'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'borderColor'</span><span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">'boederWidth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'2px solid #ccc'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>borderColor<span class="token operator">=</span>val<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span><span class="token parameter">val</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width<span class="token operator">=</span>val<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span><span class="token parameter">val</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height<span class="token operator">=</span>val<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//样式</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;target&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;control_wrap&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;show&quot;</span><span class="token operator">&gt;</span>显示隐藏<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;bgcolor_input&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;请输入BcakgroundColor&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;bgcolor_btn&quot;</span><span class="token operator">&gt;</span>确定<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;bdcolor_input&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;请输入border-color&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;bdcolor_btn&quot;</span><span class="token operator">&gt;</span>确定<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>width<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;width_j&quot;</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;width_input&quot;</span> readonly<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;width_add&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>height<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;height_j&quot;</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;height_input&quot;</span> readonly<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;height_add&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    
    <span class="token comment">//操作逻辑</span>
    <span class="token comment">// 显示隐藏</span>
      <span class="token keyword">const</span> showbtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      showbtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;隐藏&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;显示&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          box<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置背景颜色</span>
      <span class="token keyword">const</span> bgcolor_input<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.bgcolor_input'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> bg_btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.bgcolor_btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bg_btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bgcolor_input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'backgroundColor'</span><span class="token punctuation">,</span>bgcolor_input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bgcolor_input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置boder的颜色</span>
      <span class="token keyword">const</span> bdcolor_input<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.bdcolor_input'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> bd_btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.bdcolor_btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bd_btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bdcolor_input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'borderColor'</span><span class="token punctuation">,</span>bdcolor_input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 设置目标元素的宽度变化模块</span>
      <span class="token keyword">const</span> wj_btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.width_j'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> wa_btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.width_add'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      wj_btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> getw<span class="token operator">=</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>getw<span class="token operator">&gt;</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span>getw<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       wa_btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> getw<span class="token operator">=</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>getw<span class="token operator">&lt;</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span>getw<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 设置目标元素的高度变化模块</span>
      <span class="token keyword">const</span> hj_btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.height_j'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> ha_btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.height_add'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> h_input<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.height_input'</span><span class="token punctuation">)</span>
      hj_btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> geth<span class="token operator">=</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>geth<span class="token operator">&gt;</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span>getw<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          h_input<span class="token punctuation">.</span>value<span class="token operator">=</span>geth<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ha_btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> getw<span class="token operator">=</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>geth<span class="token operator">&lt;</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span>getw<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          h_input<span class="token punctuation">.</span>value<span class="token operator">=</span>geth<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre></div></li></ul></li></ul> <h2 id="防抖和节流"><a href="#防抖和节流" class="header-anchor">#</a> 防抖和节流</h2> <ul><li><p><strong>函数防抖</strong>（debounce）：其概念其实是从机械开关和继电器的“去弹跳”（debounce）衍生出来的，基本思路就是把多个信号合并为一个信号。比如一个 <code>input</code> 每当输入结束后两秒执行搜索事件，这就是个很经典的防抖需求。</p></li> <li><p><strong>函数防抖</strong>的实现思路如下：将目标方法（动作）包装在setTimeout里面，然后这个方法是一个事件的回调函数，如果这个回调一直执行，那么这些动作就一直不执行。为什么不执行呢，我们设置了一个clearTimeout，这样setTimeout里的方法就不会执行！ 为什么要clearTimeout呢，我们就需要将事件内的连续动作删掉嘛！待到用户不触发这事件了。那么setTimeout就自然会执行这个方法。</p></li> <li><h3 id="防抖-debounce-多用于-延迟多久后触发"><a href="#防抖-debounce-多用于-延迟多久后触发" class="header-anchor">#</a> <code>防抖 debounce 多用于 “ 延迟多久后触发 ”</code></h3></li> <li><p>具体用于input输入框架的格式验证，假如只是验证都是字母也罢了，太简单了，不怎么耗性能，如果是验证是否身份证，这性能消耗大，你可以隔170ms才验证一次。这时就需要这个东西。或者你这个是自动完全，需要将已有的输入数据往后端拉一个列表，频繁的交互，后端肯定耗不起，这时也需要这个，如隔 350ms 。 所以大致就有以下两种应用情景：</p> <ol><li>每次 resize/scroll 触发统计事件</li> <li>文本输入的验证（连续输入文字后发送 AJAX 请求进行验证，验证一次就好）</li> <li>表单提交按钮提交</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">.app</span> <span class="token punctuation">{</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>取消防抖<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/underscore.js/1.11.0/underscore.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./debounce.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">dosome</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 解决参数问题</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 解决this指向</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 发请求</span>
            count<span class="token operator">++</span>
            app<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// app.onmousemove = function () {</span>
        <span class="token comment">//     setTimeout(function () {</span>
        <span class="token comment">//         dosome();</span>
        <span class="token comment">//     }, 2000);</span>
        <span class="token comment">// }</span>
        <span class="token comment">// app.onmousemove = function(){dosome()};</span>
        <span class="token comment">// 高阶函数 防抖</span>
        <span class="token keyword">var</span> _de <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>dosome<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 取消防抖</span>
        btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _de<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        app<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> _de<span class="token punctuation">;</span><span class="token comment">//true延时前做操作  flase延时完后做操作</span>
        <span class="token comment">// 防抖</span>
        <span class="token comment">// 事件响应函数(doSomeThing)在一段时间后(300ms)才执行，如果在这段时间内再次调用，则重新计算执行时间;当预定的时间内没有再次调用该函数，则执行(doSomeThing)函数</span>
        <span class="token comment">// 应用场景</span>
        <span class="token comment">// 1.scroll事件滚动触发</span>
        <span class="token comment">// 2.搜索框输入查询</span>
        <span class="token comment">// 3.表单验证</span>
        <span class="token comment">// 4.按钮提交事件</span>
        <span class="token comment">// 5.浏览器窗口缩放，resuze事件</span>
        <span class="token comment">// 解决事件频繁触发带来的困扰</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 防抖函数的封装</span>
<span class="token comment">// ES5</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> immediate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timeout<span class="token punctuation">,</span> callNow<span class="token punctuation">,</span> resul<span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 解决this指向问题</span>
        <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment">// 把函数参数搞定</span>
        <span class="token keyword">var</span> ars <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token comment">// 每次返回前判断清除一下定时器</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            callNow <span class="token operator">=</span> <span class="token operator">!</span>timeout<span class="token punctuation">;</span><span class="token comment">//不等于空true  </span>
            timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 立即执行</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> <span class="token punctuation">{</span> resul <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> ars<span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 不会立即执行</span>
            timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// wait时后执行func函数</span>
                <span class="token comment">// func.call(_this,ars);这里更推荐使用apply</span>
                <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> ars<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> resul<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 取消防抖</span>
    debounce<span class="token punctuation">.</span><span class="token function-variable function">cancel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> debounce<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>函数节流</strong>（throttle）：节流的概念可以想象一下水坝，你建了水坝在河道中，不能让水流动不了，你只能让水流慢些。换言之，你不能让用户的方法都不执行。如果这样干，就是debounce了。为了让用户的方法在某个时间段内只执行一次，我们需要保存上次执行的时间点与定时器。</p></li> <li><p><strong>函数节流</strong>的实现思路如下：某些代码不可以在没有间断的情况连续重复执行。第一次调用函数，创建一个定时器，在指定的时间间隔之后运行代码。当第二次调用该函数时，它会清除前一次的定时器并设置另一个。如果前一个定时器已经执行过了，这个操作就没有任何意义。然而，如果前一个定时器尚未执行，其实就是将其替换为一个新的定时器。目的是只有在执行函数的请求停止了一段时间之后才执行。</p></li> <li><h3 id="节流-throttle-多用于-多久触发一次"><a href="#节流-throttle-多用于-多久触发一次" class="header-anchor">#</a> <code>节流 throttle 多用于 “ 多久触发一次 ”</code></h3></li> <li><p>函数节流会用在比input, keyup更频繁触发的事件中，如resize, touchmove, mousemove, scroll。throttle 会强制函数以固定的速率执行。因此这个方法比较适合应用于动画相关的场景。</p> <ul><li>DOM 元素的拖拽功能实现（mousemove）</li> <li>射击游戏的 mousedown/keydown 事件（单位时间只能发射一颗子弹）</li> <li>计算鼠标移动的距离（mousemove）</li> <li>Canvas 模拟画板功能（mousemove）</li> <li>搜索联想（keyup）</li> <li>监听滚动事件判断是否到页面底部自动加载更多：给 scroll 加了 debounce 后，只有用户停止滚动后，才会判断是否到了页面底部；如果是 throttle 的话，只要页面滚动就会间隔一段时间判断一次</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timeout<span class="token punctuation">,</span> now<span class="token punctuation">,</span> old <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">)</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第一次就不会执行了</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>leading <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>old<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            now <span class="token operator">=</span> old<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> old <span class="token operator">&gt;</span> wait<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span> timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            old <span class="token operator">=</span> now<span class="token punctuation">;</span>
            <span class="token comment">// 判断来的training是true还是false</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeout <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>training <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                old <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// throttle.cancel = function () {</span>
    <span class="token comment">//     clearTimeout(timeout);</span>
    <span class="token comment">//     timeout = null;</span>
    <span class="token comment">//     now = 0;</span>
    <span class="token comment">// }</span>
    <span class="token keyword">return</span> throttle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//调用代码</span>
	<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">dosome</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 解决参数问题</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 解决this指向</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 发请求</span>
            count<span class="token operator">++</span>
            app<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 高阶函数 防抖</span>
        <span class="token keyword">var</span> _de <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>dosome<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> leading<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> training<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> _de<span class="token punctuation">;</span><span class="token comment">//true延时前做操作  flase延时完后做操作</span>
        btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _de<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// console.log(new Date().getTime());</span>
        <span class="token comment">// console.log(new Date().valueOf());</span>

</code></pre></div></li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/document/study/js/shu_ju_jie_gou_yu_suan_fa.html" title="上一篇：数据结构与算法" class="prev"><i class="fas fa-arrow-left"></i>
            数据结构与算法
          </a></span> <span class="next"><a href="/blog/document/study/vue/pdfda_yin.html" title="下一篇：PDF文件流前端下载并打印">
            PDF文件流前端下载并打印
            <i class="fas fa-arrow-right"></i></a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-26718cec><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#三种基础数据结构" class="sidebar-link reco-side-三种基础数据结构" data-v-26718cec>三种基础数据结构</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#栈" class="sidebar-link reco-side-栈" data-v-26718cec>栈</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#堆" class="sidebar-link reco-side-堆" data-v-26718cec>堆</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#队列" class="sidebar-link reco-side-队列" data-v-26718cec>队列</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#内存空间" class="sidebar-link reco-side-内存空间" data-v-26718cec>内存空间</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#基本数据类型与变量对象" class="sidebar-link reco-side-基本数据类型与变量对象" data-v-26718cec>基本数据类型与变量对象</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#引用数据类型与堆内存空间" class="sidebar-link reco-side-引用数据类型与堆内存空间" data-v-26718cec>引用数据类型与堆内存空间</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#内存空间管理" class="sidebar-link reco-side-内存空间管理" data-v-26718cec>内存空间管理</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#执行上下文" class="sidebar-link reco-side-执行上下文" data-v-26718cec>执行上下文</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#javascript运行环境" class="sidebar-link reco-side-javascript运行环境" data-v-26718cec>JavaScript运行环境</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#变量对象" class="sidebar-link reco-side-变量对象" data-v-26718cec>变量对象</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#闭包" class="sidebar-link reco-side-闭包" data-v-26718cec>闭包</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#闭包的概念" class="sidebar-link reco-side-闭包的概念" data-v-26718cec>闭包的概念</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#闭包与垃圾回收机制" class="sidebar-link reco-side-闭包与垃圾回收机制" data-v-26718cec>闭包与垃圾回收机制</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#闭包与作用域链" class="sidebar-link reco-side-闭包与作用域链" data-v-26718cec>闭包与作用域链</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#应用闭包" class="sidebar-link reco-side-应用闭包" data-v-26718cec>应用闭包</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#单例模式与闭包" class="sidebar-link reco-side-单例模式与闭包" data-v-26718cec>单例模式与闭包</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#闭包与模块化" class="sidebar-link reco-side-闭包与模块化" data-v-26718cec>闭包与模块化</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#this" class="sidebar-link reco-side-this" data-v-26718cec>this</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#函数与函数式编程" class="sidebar-link reco-side-函数与函数式编程" data-v-26718cec>函数与函数式编程</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#函数声明" class="sidebar-link reco-side-函数声明" data-v-26718cec>函数声明</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#函数表达式" class="sidebar-link reco-side-函数表达式" data-v-26718cec>函数表达式</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#匿名函数" class="sidebar-link reco-side-匿名函数" data-v-26718cec>匿名函数</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#自执行函数" class="sidebar-link reco-side-自执行函数" data-v-26718cec>自执行函数</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#函数式编程" class="sidebar-link reco-side-函数式编程" data-v-26718cec>函数式编程</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#函数是一等公民" class="sidebar-link reco-side-函数是一等公民" data-v-26718cec>函数是一等公民</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#纯函数" class="sidebar-link reco-side-纯函数" data-v-26718cec>纯函数</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#高阶函数" class="sidebar-link reco-side-高阶函数" data-v-26718cec>高阶函数</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#高阶函数的应用思路" class="sidebar-link reco-side-高阶函数的应用思路" data-v-26718cec>高阶函数的应用思路</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#柯里化函数" class="sidebar-link reco-side-柯里化函数" data-v-26718cec>柯里化函数</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#组合函数" class="sidebar-link reco-side-组合函数" data-v-26718cec>组合函数</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#面对对象" class="sidebar-link reco-side-面对对象" data-v-26718cec>面对对象</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#对象定义" class="sidebar-link reco-side-对象定义" data-v-26718cec>对象定义</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#创建对象" class="sidebar-link reco-side-创建对象" data-v-26718cec>创建对象</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#构造函数与原型" class="sidebar-link reco-side-构造函数与原型" data-v-26718cec>构造函数与原型</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#公有方法和私有方法" class="sidebar-link reco-side-公有方法和私有方法" data-v-26718cec>公有方法和私有方法</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#原型链" class="sidebar-link reco-side-原型链" data-v-26718cec>原型链</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#实例方法、原型方法、静态方法" class="sidebar-link reco-side-实例方法、原型方法、静态方法" data-v-26718cec>实例方法、原型方法、静态方法</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#继承" class="sidebar-link reco-side-继承" data-v-26718cec>继承</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#属性类型" class="sidebar-link reco-side-属性类型" data-v-26718cec>属性类型</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#jquery封装" class="sidebar-link reco-side-jquery封装" data-v-26718cec>JQuery封装</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#es6与模块化" class="sidebar-link reco-side-es6与模块化" data-v-26718cec>ES6与模块化</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#常用语法知识" class="sidebar-link reco-side-常用语法知识" data-v-26718cec>常用语法知识</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#箭头函数" class="sidebar-link reco-side-箭头函数" data-v-26718cec>箭头函数</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#函数内部this指向" class="sidebar-link reco-side-函数内部this指向" data-v-26718cec>函数内部this指向</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#模本字符串" class="sidebar-link reco-side-模本字符串" data-v-26718cec>模本字符串</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#解构结构" class="sidebar-link reco-side-解构结构" data-v-26718cec>解构结构</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#展开运算符" class="sidebar-link reco-side-展开运算符" data-v-26718cec>展开运算符</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#promise详解" class="sidebar-link reco-side-promise详解" data-v-26718cec>Promise详解</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#当我们想要确保某些代码在某某之后执行时" class="sidebar-link reco-side-当我们想要确保某些代码在某某之后执行时" data-v-26718cec>当我们想要确保某些代码在某某之后执行时</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#promise-all" class="sidebar-link reco-side-promise-all" data-v-26718cec>Promise.all</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#promise-race" class="sidebar-link reco-side-promise-race" data-v-26718cec>Promise.race</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#async-await" class="sidebar-link reco-side-async-await" data-v-26718cec>async/await</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#异常处理" class="sidebar-link reco-side-异常处理" data-v-26718cec>异常处理</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#事件循环机制" class="sidebar-link reco-side-事件循环机制" data-v-26718cec>事件循环机制</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#class和对象" class="sidebar-link reco-side-class和对象" data-v-26718cec>Class和对象</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#class" class="sidebar-link reco-side-class" data-v-26718cec>class</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#继承-2" class="sidebar-link reco-side-继承-2" data-v-26718cec>继承</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#模块化" class="sidebar-link reco-side-模块化" data-v-26718cec>模块化</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#基础语法" class="sidebar-link reco-side-基础语法" data-v-26718cec>基础语法</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#例子" class="sidebar-link reco-side-例子" data-v-26718cec>例子</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#模块化开发" class="sidebar-link reco-side-模块化开发" data-v-26718cec>模块化开发</a></li><li class="level-2" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#防抖和节流" class="sidebar-link reco-side-防抖和节流" data-v-26718cec>防抖和节流</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#防抖-debounce-多用于-延迟多久后触发" class="sidebar-link reco-side-防抖-debounce-多用于-延迟多久后触发" data-v-26718cec>防抖 debounce 多用于 “ 延迟多久后触发 ”</a></li><li class="level-3" data-v-26718cec><a href="/blog/document/study/js/he_xin_kai_fa_jie_mi.html#节流-throttle-多用于-多久触发一次" class="sidebar-link reco-side-节流-throttle-多用于-多久触发一次" data-v-26718cec>节流 throttle 多用于 “ 多久触发一次 ”</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a008c6ba data-v-a008c6ba><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a008c6ba><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a008c6ba></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a008c6ba></path></svg></div><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="random" preload="auto" volume="0.5" mutex="true" lrc-type="0" list-folded="true" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div><!----></div></div>
    <script src="/blog/assets/js/app.7577deed.js" defer></script><script src="/blog/assets/js/4.7e4bef46.js" defer></script><script src="/blog/assets/js/1.0a267af7.js" defer></script><script src="/blog/assets/js/25.bb21919b.js" defer></script><script src="/blog/assets/js/13.2e75bce1.js" defer></script>
  </body>
</html>
